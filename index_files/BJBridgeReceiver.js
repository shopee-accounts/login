isShopeeApp()||(window.BJBridgeReceiver=function(){function e(e){return e.callbackId}function n(e,n){var t=e+curTs();return _[t]=function(e){n(e),delete _[t]},t}function t(n,t){var a=e(n);a in _&&_[a](t)}function a(e,t,a){if(O[e]){if(a)var i=n(e,a);t.callbackId=i,O[e](t)}else;}function i(e,n){"function"==typeof n&&(e in J?J[e](n):o(e,n))}function o(e,n){e in W&&(BJUtil.idx(D,e,function(){})(),W[e].push(n))}function r(e,n){var t=W[e];t?t.forEach(function(e){"function"==typeof e&&e(n)}):(console.warn("Unsupported Bridge Event - "+e),console.warn(n))}function l(e){var n=!1;try{parent.BJUtil.isInModal()}catch(t){log.warn("parent domain is different from current one"),n=!0}if(!n&&parent.BJUtil.isInModal()){for(var a=e.count||1,i=parent;a>1;)i=i.parent,--a;i.BJUtil.viewWillReappearHandler({data:e.data||"{}"}),i.BJUtil.pop()}else BJUtil.goBackOrClose()}function c(e){var n=e.presentModal||e.presentModalWebOnly,t=e.url;if("_blank"==e.target)s(t,!0);else if(n){var a="modal_frame_at_"+curTs();t=generateGetUri(t,{is_panel:1}),BJUtil.navigateModally(t,a)}else s(t)}function s(e,n){window.MALL_HOST_ROOT_URL&&0==e.indexOf("/")&&(e=window.MALL_HOST_ROOT_URL+e),n?window.open(e):location.href=e}function p(e){BJUtil.showWebPopUp(e)}function u(e){BJUtil.showWebPinPopUp(e)}function d(e){BJUtil.showActionSheet(e)}function f(e){BJUtil.showDropDownMenu(e)}function h(e){var n=e.title;n&&BJUtil.configurePageTitle(n)}function g(e){if(e.navbar){if(e.navbar.title){var n={title:e.navbar.title};h(n)}if(e.navbar.rightItemsConfig&&Array.isArray(e.navbar.rightItemsConfig.items)){var t=e.navbar.rightItemsConfig.items,a=$(".btn-bottom-holder");if(0==a.length)return;t.forEach(function(e){if("button"==e.type){var n=e.key||"",t=e.text||"",i=$("<div>").addClass("btn-bottom").attr("data-key",n).text(t);i.on("tap",function(){r("onEventCallback",{key:$(this).data("key")})}),i.appendTo(a),a.removeClass("hidden")}})}}}function b(e){BJUtil.save(e)}function w(e){BJUtil.load(e)}function v(e){var n=e.shopID,t=e.itemID,a=e.ratings;if(n&&t){if(a)var i="/shop/{0}/item/{1}/rating/".f(n,t);else var i="/shop/{0}/item/{1}/comments_new/".f(n,t);bridgeCallHandler("navigate",{url:i,presentModalWebOnly:!0})}}function m(e){var n=parse_get_params(e.path),t=e.path.split("?")[0],a=null;a=e.pcmallBaseUrl?generateGetUri(e.pcmallBaseUrl+T[t],n):generateGetUri(S[t],n),a?s(a):console.error("Unsupported AppRoute on web - {0}. Refer to UrlByAppRoute in BJBridgeReceiver.js for supported routes.".f(e.path))}function C(e){isWebChatEnabled()?window.SCInstance&&window.SCInstance.startChat?loggedin?window.SCInstance.startChat(e.shopID,e.userID,e.itemID):askLogin():console.error("Web Chat not supported"):console.warn("Web Chat disabled")}function B(e){isWebChatEnabled()?window.SCInstance&&window.SCInstance.startChat?loggedin?window.SCInstance.startOrderChat(e.shopID,e.userID,e.orderID):askLogin():console.error("Web Chat not supported"):console.warn("Web Chat disabled")}function U(e){var n;if(e)switch(e.redirectTab){case 1:n="/buyer/login/";break;case 0:n="/buyer/login/signup/";break;default:n="/buyer/login/signup/"}else n="/buyer/login/signup/";s(n)}function k(e){t(e,e)}function I(e){var n={};n.deviceID=null,n.deviceFingerprint=$.cookie("SPC_F"),t(e,n)}var y=!1,_={},J={viewWillReappear:function(e){y=!0,BJUtil.viewWillReappear(e)}},W={onEventCallback:[],didTapBack:[],tabShow:[]},D={didTapBack:function(){$(".header .icon_left.ic_arrow_back").off("tap").on("tap",function(){r("didTapBack",{})})}},S={home:"/",me:"/me/",cart:"/buyer/cart/",checkout:"/buyer/w/checkout/confirmation/",paid:"/me/?page=all",unpaid:"/me/","purchases?tab=paid":"/me/"},T={home:"/",me:"/me/",cart:"/cart/",checkout:"/checkout/",paid:"/user/purchase/list/?type=7",unpaid:"/user/purchase/list/?type=9","purchases?tab=paid":"/me/"},O={popWebView:l,showPopUp:p,showPinPopUp:u,showActionSheet:d,showDropDownMenu:f,navigate:c,configureNavBarTitle:h,configurePage:g,save:b,load:w,showItemComments:v,jump:m,startChat:C,startOrderChat:B,getAppInfo:I,login:U,share:k};return{callHandler:a,registerHandler:i,callCallback:t,triggerBridgeEvent:r}}());
//# sourceMappingURL=../source_maps/BJBridgeReceiver.js.map
