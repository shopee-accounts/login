function _bi_addGSrcToUrl(e,t,i){var n="_gsrc";if(!t||!e)return e;var a=e,o=a.indexOf("#")<0?"#":"&";return i&&(o=a.indexOf("?")<0?"?":"&"),a+=o+n+"="+encodeURIComponent(t)}function _track_share_item(){_track_open_app("share_item")}function _track_share_shop(){_track_open_app("share_shop")}function _track_comment(){_track_open_app("comment")}function _track_buy_action(){_track_open_app("buy")}function _track_chat(){_track_open_app("chat")}function _track_location(){_track_open_app("location")}function _track_download_ios(){_track_download("ios")}function _track_download_android(){_track_download("android")}function _track_open_app(e){_trackEvent("web_interaction",e)}function _track_qos_pageload(e){for(var t=window.location.pathname.split("/"),i=0;i<t.length;i++){var n=t[i];if(n){for(var a=!0,o=0;o<n.length;o++)if(n[o]<"0"||n[o]>"9"){a=!1;break}a&&(t[i]="*")}}var r=t.join("/"),l=e>5e3?"pageload_slow":"pageload_normal";_trackEvent("qos",l,r,e)}function _track_download(e){_trackEvent("download",e)}function _track_item_page_load(e,t){_trackEvent("product","page_load",e+"&"+t)}function _track_shop_page_load(e){_trackEvent("shop","page_load",e)}function _track_open_item_from_feeds(e){_trackEvent("product","click_follow",e)}function _track_open_item_from_likes(e){_trackEvent("product","click_likes",e)}function _track_open_item_from_collection(e,t){_trackEvent("product","click_collection_"+e,t)}function _track_open_item_from_shop(e,t){_trackEvent("product","click_shop_"+e,t)}function _track_open_item_from_category(e,t){_trackEvent("product","click_category_"+e,t)}function _track_open_item_from_search(e,t){_trackEvent("product","click_search_"+e,t)}function _track_open_item_from_item_recommend(e){_trackEvent("product","click_item_recommend",e)}function _track_open_item_from_cart_recommend(e){_trackEvent("product","click_cart_recommend",e)}function _track_open_item_from_hashtag_list(e,t){_trackEvent("product","click_hashtag_"+e,t)}function _track_open_item_from_seller_collection(e,t){_trackEvent("product","click_seller_collection_"+e,t)}function _track_open_item_from_timeline(e){_trackEvent("product","click_feed",e)}function _track_open_shop_from_follow(e){_trackEvent("shop","click_follow",e)}function _track_open_shop_from_external_link(e){_trackEvent("shop","click_external_link",e)}function _track_open_shop_from_seller_collection(e,t){_trackEvent("shop","click_seller_collection_"+e,t)}function _track_open_shop_from_timeline(e){_trackEvent("shop","click_feed",e)}function _track_open_shop_from_search(e){_trackEvent("shop","click_search",e)}function _track_open_shop_from_cart(e){_trackEvent("shop","click_cart",e)}function _track_open_shop_from_likes(e){_trackEvent("shop","click_likes",e)}function _track_open_shop_from_product(e,t){_trackEvent("shop","click_product_"+t,e)}function _track_register_user_in_purchase(e){_trackEvent("user","register_purchase",e)}function _track_register_user_in_homepage(e){_trackEvent("user","register_homepage",e)}function _track_add_to_cart(e){_trackEvent("cart","add_to_cart","item_value",Math.round(parseFloat(e)))}function _track_place_order_from_web(e,t){_trackEvent("order","place_order_web",t,Math.round(parseFloat(e)))}function _track_place_order_from_pc(e,t,i){if(window.ga){for(var n=0;n<e.length;n++)ga("pcTracker.ec:addProduct",{id:e[n].id,quantity:e[n].quantity});ga("pcTracker.ec:setAction","purchase",{id:i+"",revenue:t}),ga("pcTracker.send","event","tracking","purchase")}}function _track_place_order_from_app(e,t){_trackEvent("order","place_order_app",t,Math.round(parseFloat(e)))}function _track_open_hashtag_list_from_timeline(e){_trackEvent("hashtag","click_feeds",e)}function _track_open_hashtag_list_from_trending(e){_trackEvent("hashtag","click_trending",e)}function _track_open_hashtag_list_from_search(e){_trackEvent("hashtag","click_search",e)}function _track_open_hashtag_list_from_product_page(e){_trackEvent("hashtag","click_product_page",e)}function _track_open_subcategory_from_category(e,t){_trackEvent("subcategory","click_from_category_"+e,t)}function _track_seller_collection_follow(e,t){_trackEvent("seller_collection","click_follow_"+e,t)}function _track_seller_collection_follow_all(e){_trackEvent("seller_collection","click_follow_all_"+e)}function _trackEvent(e,t,i,n){e&&t?window.ga?i&&n?window.ga("send","event",e,t,""+i,n):i?window.ga("send","event",e,t,""+i):window.ga("send","event",e,t):window._gaq?i&&n?_gaq.push([e,t,""+i,n]):i?_gaq.push([e,t,""+i]):_gaq.push([e,t]):console.log("GA failed: No ga or gaq found. cat="+e+"; act="+t):console.log("GA failed: cat="+e+"; act="+t)}function dismissNonShopeeBridge(){return!isShopeeApp()&&(delete window.WebViewJavascriptBridge,!0)}function connectWebViewJavascriptBridge(e){dismissNonShopeeBridge()||(window.WebViewJavascriptBridge?e(WebViewJavascriptBridge):document.addEventListener("WebViewJavascriptBridgeReady",function(){dismissNonShopeeBridge()||e(WebViewJavascriptBridge)},!1))}function tapCallBack(e,t,i){var n=$(e.currentTarget),a=n.attr("_href");a.indexOf(t)!==-1&&(a=location.origin+a,bridgeCallHandler("navigate",callback(a,n),function(e){}))}function bridge_capture_link(e,t,i){$.each(t,function(t,n){var a=$(n),o=a.attr("href")&&"javascript:void(0)"!=a.attr("href")?a.attr("href"):a.attr("_href");o&&o.indexOf("review-part")>-1||!o||e&&o.indexOf(e)===-1||(a.attr("_href")?console.log("pass"):a.attr("_href",o),a.attr("href","javascript:void(0)"),a.off("tap"),a.on("tap",function(e){if(!a.hasClass("banned")){var t=i(location.origin+o,a);t.reactNative?BJUtil.navigateReactNative(t.rnParams):bridgeCallHandler("navigate",t,function(e){console.log("Yeps")})}}))})}function get_custom_select_handler(e,t,i,n,a){return function(o){o.preventDefault();var r=[],l=$(e);if(l.find("option:not(.disable)").each(function(e,t){r.push($(t).text())}),n)var c=n;else var s=r.indexOf(e.find("option:selected").text()),c=s;var d=convertOptionsTextToHashedUri(r,c,i,a),d="";i||(i=window.WebViewJavascriptBridge),i?i.callHandler("save",{key:"select-name",data:l.attr("id"),persist:0},function(e){e&&bridgeCallHandler("navigate",{url:location.origin+"/func/app_select#"+d,navbar:{title:t},config:{disableReload:!0}},function(e){})}):(sessionStorage["select-name"]=l.attr("id"),BJUtil.navigateModally(location.origin+"/func/app_select#"+d,"custom_select"))}}function bridge_capture_link_shop_callback(e,t){var i=t.attr("username");i||(i="");var n=t.attr("userid"),a=[{type:"home"},{type:"reportuser",userID:n}];return USERID&&USERID==parseInt(n)&&(a=[{type:"home"}]),{url:e,navbar:{title:"@"+i,rightItemsConfig:{items:[{type:"more",items:a}]}}}}function bridge_capture_link_item_callback(e,t){keys=parse_hash_general(e);var i=t.parents("li"),n=i.find(".item-detail .name").text(),a=keys.shopid,o=keys.itemid;return{url:e,config:{},navbar:getItemNavBar(a==CURRENT_SHOPID,n,a,o)}}function getItemNavBar(e,t,i,n){return e?{title:t,rightItemsConfig:{items:[{type:"more",items:[{type:"button",key:"edit",text:i18n.t("label_edit_product"),iconType:"editProduct"},{type:"home"}]}]}}:{title:t,rightItemsConfig:{items:[{type:"more",items:[{type:"home"},{type:"button",itemID:n,shopID:i}]}]}}}function getCateNavBar(e,t){return{title:t,searchParam:e,searchType:1,showSearch:isVer22Plus()?1:0,searchPlaceholder:isVer22Plus()?t:i18n.t("label_search_in")+" "+t,searchPlaceholderActive:i18n.t("label_search_in")+" "+t,searchScope:{0:[{text:i18n.t("label_search_within_category").replace("#{categoryName}",encloseColorCode(t,"b2"))},{text:i18n.t("label_search_within_category").replace("#{categoryName}",encloseColorCode(i18n.t("label_all_categories_s"),"b2"))}]},rightItemsConfig:{items:[{type:"search"},{type:"button",key:"filter",iconType:"filter",iconText:i18n.t("label_filter")}]}}}function handleNavigateCategory(e,t,i,n){if(i)isShopeeWeb()?SeoUtil.navigateCategorySeo(t,e):handleNavigateSubCategory(e,t,n);else if(isShopeeWeb())SeoUtil.navigateCategorySeo(t,e);else{var a=location.origin+"/categories/"+e+"/";bridgeCallHandler("navigate",{url:a,preloadKey:"maincate",navbar:getCateNavBar(e,t)},function(){})}}function getOfficialShopSearchConfig(){window.i18njs&&(i18n.t("label_official_shops--TW"),i18n.t("label_official_shops--ID"),i18n.t("label_official_shops--MY"),i18n.t("label_official_shops--PH"),i18n.t("label_official_shops--TH"),i18n.t("label_official_shops--VN"),i18n.t("label_official_shops--SG"));var e="label_official_shops--"+window.LOCALE,t={searchType:1,currentSearchType:0,searchPlaceholderColor:"#8e8e93",searchPlaceholder:i18n.t("label_search_in")+" "+toTitleCase(i18n.t(e)),searchPlaceholderActive:i18n.t("label_search_in")+" "+toTitleCase(i18n.t(e)),searchMatchValue:JSON.stringify({official:1}),searchHotwords:{0:[]},isGlobalSearch:!0};return t}function getOfficialShopNavBar(){var e=window.APPVER||window.VERSION,t="label_official_shops--"+window.LOCALE,i={searchType:1,currentSearchType:0,title:i18n.t(t).toUpperCase(),searchPlaceholderColor:"#8e8e93",searchPlaceholder:i18n.t("label_search_in")+" "+toTitleCase(i18n.t(t)),searchPlaceholderActive:i18n.t("label_search_in")+" "+toTitleCase(i18n.t(t)),searchMatchValue:JSON.stringify({official:1}),searchHotwords:{0:[]},searchConfig:{isGlobalSearch:!0}},n=[{type:"button",key:"nav_cart",text:i18n.t("label_cart"),iconUrl:BJUtil.getIconUrl("ic_officialshop_cart"),iconUrlOnDark:BJUtil.getIconUrl("ic_officialshop_cart_dark")}],a=[{type:"search"},{type:"more",items:n}];return(isIOS()&&e>=21116||isAndroid()&&e>=21100)&&(i.navbarStyle=1,i.navbarBackgroundColor="#D0011B",i.statusBarStyle=1),(isIOS()||isAndroid()&&e>=21205)&&(i.searchType=0),isAndroid()&&e<21100||n.push({type:"button",key:"nav_chat",text:i18n.t("label_chat")+Array(26).join(" "),iconUrl:BJUtil.getIconUrl("ic_officialshop_chats"),iconUrlOnDark:BJUtil.getIconUrl("ic_officialshop_chats_dark")}),e>=21116&&(i.rightItemsConfig={items:a}),i}function getSubCateNavBar(e,t){var i="b2";return{title:t,searchParam:e,searchType:1,showSearch:isVer22Plus()?1:0,searchPlaceholder:isVer22Plus()?t:i18n.t("label_search_in")+" "+t,searchPlaceholderActive:i18n.t("label_search_in")+" "+t,searchScope:{0:[{text:i18n.t("label_search_within_category").replace("#{categoryName}",encloseColorCode(t,i))},{text:i18n.t("label_search_within_category").replace("#{categoryName}",encloseColorCode(i18n.t("label_all_categories_s"),i))}]},rightItemsConfig:{items:[{type:"search"},{type:"button",key:"filter",iconType:"filter",iconText:i18n.t("label_filter")}]}}}function handleNavigateSubCategory(e,t,i){var n=location.origin+"/category-item/?categoryid="+e+"&categoryname="+encodeURIComponent(t);getCategoryNativeTabs(n);bridgeCallHandler("navigate",{url:n,navbar:getSubCateNavBar(e,t)},function(){})}function handleNavigateItem(){$(".item-href").off("tap"),bridge_capture_link("/item/",$("a"),bridge_capture_link_item_callback)}function convertOptionsTextToHashedUri(e,t,i,n){var a="";return e.forEach(function(e,t){var i="option"+t+"="+encodeURIComponent(e);a=0==t?a:a+"&",a+=i}),t&&(a+="&selected="+t),n&&(a=a+"&params="+encodeURIComponent(JSON.stringify(n))),localStorage.setItem("custom_select_text",a),""}function _gatap_(e,t){var i=document.elementFromPoint(e,t);if(i&&"IFRAME"==i.tagName){var n=i.offsetTop,a=scrollTopFunc(),o=i.contentWindow,r=o.document.elementFromPoint(e,t-(n-a));console.log(r),i=$(r),i.trigger("tap")}else $(i).tap(),console.log("app triggered tap on element "+(i?i.tagName+" (class="+i.className+")":i))}function _android_gatap_temporary_disable_(e){window.gabridge&&window.gabridge.onHasHandler&&window.gabridge.onHasHandler("_gatap_",e?"false":_gatap_init_(!0)?"true":"false")}function _gatap_force_disable_(e){if(_gatap_disable_override_!=e)if(_gatap_disable_override_=e,isAndroid()){if(window.gabridge){var t=_gatap_init_(!0);window.gabridge.onHasHandler("_gatap_",t?"true":"false")}}else isIOS()&&triggerIOSAppPageReInit()}function triggerIOSAppPageReInit(e,t){try{if(!(e||isIOS()&&isShopeeApp()))return!0;if(!window.document||!window.document.documentElement)return!1;var i=window.document.documentElement,n=document.createElement("iframe");return n.style.display="none",t?n.src=CUSTOM_PROTOCOL_SCHEME+"://"+QUEUE_HAS_MESSAGE:n.src="javascript:void(0)",i.appendChild(n),setTimeout(function(){i.removeChild(n)},500),!0}catch(a){return console.log("triggerIOSAppPageReInit_ex",a),!0}}function _gatap_override_events_(){if(!_gatap_override_events_done_){_gatap_override_events_done_=!0,$.event.special.tap={setup:function(){var e=this,t=$(e),i=-1,n=-1,a=10;t.bind("vmousedown",function(e){i=e.screenX,n=e.screenY}),t.bind("vmouseup",function(e){return!_gatap_disable_override_||!(Math.abs(e.screenX-i)>a||Math.abs(e.screenY-n)>a)&&(t.trigger("tap"),e.stopImmediatePropagation(),e.preventDefault(),!0)})},teardown:function(){$(this).unbind("vmousedown").unbind("vmouseup")}};try{o=$.event.special,o.scrollstart=o.scrollstop=o.vclick=function(){}}catch(e){console.log("_gatap_override_events_|ex="+e)}}}function _gatap_init_(e){if("undefined"==typeof _gatap_||null==_gatap_||window._gatap_disable_override_)return!1;if(!window._gatap_force_enable_&&(document.getElementsByTagName("input").length>0||document.getElementsByTagName("textarea").length>0))return!1;if(e)return!0;if($("*").each(function(e,t){try{if(t=$(t),events=$._data(t[0],"events"),events&&"click"in events){var i=events.click[0].handler;i&&t.off("tap").on("tap",i).off("click")}}catch(n){}}),"undefined"!=typeof FastClick)try{FastClick.prototype.destroy()}catch(t){}return _gatap_override_events_(),!0}function __android_markNodeAsSwipeable__(e){isShopeeApp()&&isAndroid()&&(e.on("swiperight",function(){}).on("swipeleft",function(){}).off("touchstart"),setTimeout(function(){__android_getSwipeables__(e)},1e3))}function isdef(e){return"undefined"!=e}function __android_getSwipeables__(e,t){if(!window.gabridge||!window.gabridge.onAddSwipeableRect)return!1;e||(e=$("*")),t=void 0!=t&&t;var i=!1;return $.each(e,function(e,n){var a=$._data(n,"events"),o=window.getComputedStyle(n).overflowX;if(t||"scroll"==o||isdef(typeof a)&&(isdef(typeof a.swipeleft)||isdef(typeof a.swiperight))){i=!0;var r=n.getBoundingClientRect(),l=$(n).offset(),c=l.hasOwnProperty("top")?l.top:r.top,s=c+r.height;gabridge.onAddSwipeableRect(r.left,c,r.right,s)}}),i}function __ios_didAddOverflow__(e){isIOS()&&isShopeeApp()&&setTimeout(function(){var t=!1;e?$.each(e,function(e,i){var n=window.getComputedStyle(i).overflowX;if("scroll"==n)return t=!0,!1}):t=!0,t&&window.WebViewJavascriptBridge&&window.WebViewJavascriptBridge.callHandler("didAddOverflowElement",{},null)},0)}function _deeplink_trigger_(e){window.WebViewJavascriptBridge?_deeplink_trigger_handler(window.WebViewJavascriptBridge,JSON.parse(e)):DEEP_LINK_TRIGGER.CURRENT_ATTEMPT<DEEP_LINK_TRIGGER.MAX_ATTEMPT&&(DEEP_LINK_TRIGGER.CURRENT_ATTEMPT++,setInterval(function(){_deeplink_trigger_(action)},DEEP_LINK_TRIGGER.BACK_OFF))}function _deeplink_trigger_handler(e,t){switch(console.log(t),t.action){case"showChat":t.shopID&&t.itemID&&t.userID&&e.callHandler("startChat",{shopID:t.shopID,userID:t.userID,itemID:t.itemID},function(e){});break;case"showComments":t.shopID&&t.itemID&&e.callHandler("showItemComments",{shopID:t.shopID,itemID:t.itemID},function(e){});break;case"showQuantityPanel":t.shopID&&t.itemID&&parseInt(t.shopID)!=CURRENT_SHOPID&&e.callHandler("login",{},function(i){1==i.status&&e.callHandler("presentAddCart",{shopID:t.shopID,itemID:t.itemID,userID:t.userID,itemImage:t.itemImage,variations:t.variations,keepUserChoice:0,stock:t.stock,price:t.price,status:t.status},function(e){})});break;case"showMapPage":t.latitude&&t.longitude&&t.shopname&&t.title&&e.callHandler("showMapPage",{latitude:t.latitude,longitude:t.longitude,title:t.title,shopname:t.shopname},function(e){});break;case"showShopSharing":e.callHandler("share",{shopID:t.shopID,shopName:t.shopName,avatar:t.avatar,shopDesc:t.shopDesc,shopImage:t.shopImage,username:t.username,mtime:t.mtime},function(e){});break;case"likeItem":setTimeout(function(){$("#likes").trigger("tap")},1e3),console.log("like tapped");break;case"followShop":setTimeout(function(){$(".follow").trigger("tap")},1e3),console.log("follow tapped");break;case"addHash":t.hash&&setTimeout(function(){location.hash=t.hash},1e3);break;case"openOfficialShopLanding":var i=t.catid;BJUtil.jumpToOfficialShopLanding(i)}}function app_fetch_json(e,t,i,n){if(e){var a=!1;setTimeout(function(){a||getJSON(t,function(n){e.callHandler("save",{key:t,data:JSON.stringify(n),persist:0},function(){}),i(n)}).fail(n)},500),bridgeCallHandler("load",{key:t},function(o){a=!0,null==o.data||JSON.parse(o.data).banned?getJSON(t,function(n){e.callHandler("save",{key:t,data:JSON.stringify(n),persist:0},function(){}),i(n)}).fail(n):(o=JSON.parse(o.data),i(o),getJSON(t,function(n){o.version!=n.version&&(e.callHandler("save",{key:t,data:JSON.stringify(n),persist:0},function(){}),i(n))}))})}else getJSON(t,function(e){i(e)}).fail(n)}function BJDjangofy(template,params,options){function ConditionBlock(e,t){this.key=t,this.condition=null,this.block=null,this.getCondition=function(){if(!this.condition){var e=this.key.split("{%")[1].split("%}")[0],t=e.indexOf("if");t!=-1&&(e=e.slice(0,t)+e.slice(t+2)),this.condition=e.trim()}return this.condition},this.getBlock=function(){if(!this.block){var e=this.key.indexOf("{% else %}");if(e!=-1){var t=this.key.indexOf("%}");this.block=this.key.substr(t+2).split("{% else %}")[0]}else{var t=this.key.indexOf("%}");this.block=this.key.substr(t+2).split("{% endif %}")[0]}}return this.block},this.getElseBlock=function(){if(!this.elseBlock){var e=this.key.indexOf("{% else %}");if(e>0){var t=e;this.elseBlock=this.key.substr(t+10).split("{% endif %}")[0]}else this.elseBlock=""}return this.elseBlock}}function ForBlock(e,t){this.key=t,this.block=null,this.getStatement=function(){return this.key.split("%}")[0].split("{%")[1].trim()},this.getBlock=function(){return this.key.substr(this.key.indexOf("%}")+2).split("{% endfor %}")[0]},this.getRoot=function(){return this.getStatement().split(" in ")[1].trim()},this.getChild=function(){return this.getStatement().split("for ")[1].split(" in ")[0].trim()},this.populateForBlocks=function(t){for(var i=e.getValue(this.getRoot(),t)||[],n="",a=0;a<i.length;a++){var o=this.getBlock();o=replaceAll(o,"{{"+this.getChild()+"}}","{{"+this.getRoot()+"."+a+"}}"),o=replaceAll(o,"{{"+this.getChild()+".","{{"+this.getRoot()+"."+a+"."),o=replaceAll(o," "+this.getChild()+"."," "+this.getRoot()+"."+a+"."),o=replaceAll(o," "+this.getChild()+"."," "+this.getRoot()+"."+a+"."),n+=o.trim()}return n}}function IncludeBlock(e,t){this.key=t,this.block=null,this.getBlock=function(){return this.key},this.getKeys=function(){var e=t.substr(t.indexOf("{% include")+11).split("%}")[0].trim();e=e.substr(1);var i=e.indexOf(" with ");return i!=-1&&(e=e.substr(0,i)),e.substr(0,e.length-1)},this.getWith=function(){var e=t.indexOf(" with "),i=[];if(e!=-1)for(var n=t.substr(e+6).split("%}")[0].trim(),a=n.split(","),o=0;o<a.length;o++)i.push({key:a[o].split("=")[0].trim(),value:a[o].split("=")[1].trim()});return i}}function DjangofyException(e){return this.message=e,this.name="Djangofy Exception",this.message}function replaceAll(e,t,i){if(t==i)return e;for(;e.indexOf(t)>=0;)e=e.replace(t,function(){return i});return e}function safe_tags_replace(e){function t(e){return i[e]||e}if(!e)return e;var i={"&":"&amp;","<":"&lt;",">":"&gt;",$:"&#36;",'"':"&quot;","'":"&#39;"};return String(e).replace(/[&<>$\"\']/g,t)}function l(e){console.log(e)}this.template=template,this.options=options,params&&"template_subs"in params&&(this.template_subs=params.template_subs),this.getMatches=function(e,t,i){i||(i=1);for(var n,a=[];n=t.exec(e);)a.push(n[0]);return a},this.getTransifyTags=function(e){var t=/{% transify[^{]*%}/g,i=this.getMatches(e,t,1);return i},this.getTags=function(e){var t=/{{[^{]*}}/g,i=this.getMatches(e,t,1);return i},this.getForBlocks=function(e){var t=e.indexOf("{% for"),i=null;if(t>-1){i=e.substring(t+1);var n=i.indexOf("{% endfor");i=i.substring(0,n),i="{"+i+"{% endfor %}"}return i},this.getConditionBlocks=function(e){var t=e.indexOf("{% if"),i=null;if(t>-1){i=e.substring(t+1);for(var n=i.indexOf("{% endif"),a=i.indexOf("{% if");a!=-1&&a<n;)tempText=i.substring(a+1),a=tempText.indexOf("{% if"),n=tempText.indexOf("{% endif"),i=tempText;i=i.substring(0,n),i="{"+i+"{% endif %}"}return i},this.getIncludeBlock=function(e){for(var t=e.indexOf("{% include"),i=[];t!=-1;){var n=e.substr(t).split("%}")[0]+"%}";i.push(new IncludeBlock(this,n)),e=e.substr(t+2),t=e.indexOf("{% include")}return i},DjangofyException.prototype=Error.prototype,this.renderInclude=function(e){var t=this.getIncludeBlock(e);if(t.length)for(var i=0;i<t.length;i++){var n=t[i];if(!this.template_subs||!n.getKeys()in this.template_subs)throw new DjangofyException("template "+n.getKeys()+" is not included");var a=this.template_subs[n.getKeys()],o=this.getIncludeBlock(a);if(o.length&&(a=this.renderInclude(a)),n.getWith().length){var r=n.getWith();for(var l in r)a=replaceAll(a,"{{"+r[l].key+"}}","{{"+r[l].value+"}}"),a=replaceAll(a,"{{"+r[l].key+".","{{"+r[l].value+"."),a=replaceAll(a," "+r[l].key+" "," "+r[l].value+" "),a=replaceAll(a," "+r[l].key+"."," "+r[l].value+".")}e=replaceAll(e,n.getBlock(),a)}return e};var CONDITION_LIST=["length","linebreaksbr"];this.getValue=function(e,t){if(e.indexOf("'")!=-1||e.indexOf('"')!=-1)return e;if(!isNaN(parseInt(e)))return parseInt(e);if(e.indexOf("|")!=-1){var i=e.split("|"),n=i[0],a=i[1],o=this.getValue(n,t);if($.inArray(a,CONDITION_LIST)>=0){if("length"==a)return o.length;if("linebreaksbr"==a)return this.nl2br(o,!0)}}for(var r=e.split("."),l=t[r[0]],c=1;c<r.length;c++)l=l&&r[c]in l?l[r[c]]:l&&!isNaN(parseInt(r[c]))?l[parseInt(r[c])]:null;return l},this.nl2br=function(e,t){if(!e)return e;var i=t||"undefined"==typeof t?"_{breakTag}_":"<br>";return(e+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+i+"$2")},this.getDictFormat=function(e){if(e.indexOf(".")!=-1){for(var t=e.split("."),i=t[0],n=1;n<t.length;n++)i+='["'+t[n]+'"]';return i}return e};var OPERANDS_LIST=["<=","<","==",">=",">","!="," in "];this.evalCondition=function(condition,data){var operands=eval("/"+OPERANDS_LIST.join("|")+"/g").exec(condition),djangofy=this;if(operands){if(" in "!=operands[0])var operand=operands[0].trim();else var operand=operands[0];var variables=condition.split(operand),executables="",val1=djangofy.getValue(variables[0].trim(),data);val1="string"==typeof val1?val1.replace(/["']/g,""):val1;var val2=djangofy.getValue(variables[1].trim(),data);if(val2="string"==typeof val2?val2.replace(/["']/g,""):val2," in "==operand){if(!val2)return!1;if(val2 instanceof Array)return val2.indexOf(val1)!=-1;if("object"==typeof val2)return val1 in val2}return eval("val1 "+operand+" val2")}condition=condition.trim();var value=djangofy.getValue(condition,data);if(value){if("object"==typeof value){var s=JSON.stringify(value);if("{}"==s||"[]"==s)return!1}return!0}return!1};var tags=null,tagPointers={};this.render=function(e){var t=this.template;t=this.renderInclude(t);for(var i=this.getForBlocks(t);i;){var n=new ForBlock(this,i),a=n.populateForBlocks(e);t=t.replace(i,a),i=this.getForBlocks(t)}for(var o=this.getConditionBlocks(t);null!=o;){var r=new ConditionBlock(this,o),l=r.getCondition(),c=this.evalCondition(l,e);t=c?replaceAll(t,o,r.getBlock()):replaceAll(t,o,r.getElseBlock()),o=this.getConditionBlocks(t)}tags=this.getTags(t);var s=this,d=!1;options&&options.retainNonMatchedKeys&&(d=!0),$.each(tags,function(i,n){var a=s.getValue(n.replace("{{","").replace("}}","").trim(),e);d&&null==a||(t=replaceAll(t,n,safe_tags_replace(a)))}),t=replaceAll(t,"_{breakTag}_","<br />");var _=this.getTransifyTags(t);return $.each(_,function(e,i){var n=i.replace('{% transify "',"").replace("{% transify '","").replace('" %}',"").replace("' %}",""),a=_djangofy_t_[n];a||(a=n),t=replaceAll(t,i,a)}),t},this.safe_tags_replace=safe_tags_replace}var BI_ACTIONS={removeCartItems:"removeCartItems",pageView:"pageView",seoPageView:"seoPageView",placeOrder:"placeOrder",didPlaceOrder:"didPlaceOrder",clickHashtagItem:"clickHashtagItem",clickSearchItem:"clickSearchItem",clickDailyDiscoverItem:"clickDailyDiscoverItem",clickYouMayAlsoLikeItem:"clickYouMayAlsoLikeItem",trackHashtagScroll:"trackHashtagScroll",trackCollectionScroll:"trackCollectionScroll",trackSearchItemScroll:"trackSearchItemScroll",trackSubcategoryScroll:"trackSubcategoryScroll",trackCategoryScroll:"trackCategoryScroll",trackDailyDiscoverScroll:"trackDailyDiscoverScroll",trackHomeDailyDiscoverScroll:"trackHomeDailyDiscoverScroll",trackShopItemScroll:"trackShopItemScroll",trackShopLikeScroll:"trackShopLikeScroll",trackSellerCollectionScroll:"trackSellerCollectionScroll",trackGenericScroll:"trackGenericScroll",trackGenericClick:"trackGenericClick",trackGenericSortType:"trackGenericSortType",trackGenericSearchPageView:"trackGenericSearchPageView",viewItemPageRecommend:"viewItemPageRecommend",voteFAQAnswer:"voteFAQAnswer",clickItemPageButton:"clickItemPageButton",trackSearchFilterApplied:"trackSearchFilterApplied",clickSearchAutoCorrectionItem:"clickSearchAutoCorrectionItem",clickDailyDiscoverSeeMore:"clickDailyDiscoverSeeMore",clickPopularProdSeeMore:"clickPopularProdSeeMore",clickSeeMore:"clickSeeMore",clickFlashDealSeeMore:"clickFlashDealSeeMore",clickOfficialSeeMore:"clickOfficialSeeMore",trackVideoPlay:"trackVideoPlay",clickRatingShortcut:"clickRatingShortcut",qos:"qos",trackRatingFilterClick:"trackRatingFilterClick",trackOfficialShopImpressions:"trackOfficialShopImpressions",clickColorfulBlock:"clickColorfulBlock",clickFilterBar:"clickFilterBar",clickFilterPanel:"clickFilterPanel",clickFilterMore:"clickFilterMore",clickFilterBarButton:"clickFilterBarButton",clickSearchMoreUsers:"clickSearchMoreUsers",sendToCartAfterPlaceOrder:"sendToCartAfterPlaceOrder",shippingOptionChanged:"shippingOptionChanged",clickCheckout:"clickCheckout",viewDeliveryAddress:"viewDeliveryAddress",clickShippingOption:"clickShippingOption",clickNewAddressSubmit:"clickNewAddressSubmit",clickEditAddressSubmit:"clickEditAddressSubmit",viewMyAddress:"viewMyAddress",clickSetAsDefaultAddress:"clickSetAsDefaultAddress",viewShipping:"viewShipping",clickPaymentOption:"clickPaymentOption",viewPaymentOption:"viewPaymentOption",clickConfirmInformation:"clickConfirmInformation",clickCreditCardSubmit:"clickCreditCardSubmit",clickotherpaymentmethodSubmit:"clickotherpaymentmethodSubmit",viewConfirmation:"viewConfirmation",clickDeliveryAddressChange:"clickDeliveryAddressChange",clickPaymentMethodChange:"clickPaymentMethodChange",clickShippingOptionChange:"clickShippingOptionChange",trackCustomCollectionCardImpression:"trackCustomCollectionCardImpression",trackCustomCollectionCardClick:"trackCustomCollectionCardClick",clickCustomCollectionModuleSeeMore:"clickCustomCollectionModuleSeeMore",trackMePageButtonClick:"trackMePageButtonClick",trackMePageItemClick:"trackMePageItemClick",trackMePageItemBoostNowClick:"trackMePageItemBoostNowClick"},BI_SCHEMA_TYPE={RAW:0,ARRAY:1,OBJECT:2,NESTED_SCHEMA:3},BI_TRACKING_SCHEMA={};BI_TRACKING_SCHEMA.productWithPageType={shop_id:{converter:toStringOrNull},product_id:{converter:toIntOrNull},view:{converter:toIntOrNull}},BI_TRACKING_SCHEMA.category={catname:{converter:toStringOrNull},catid:{converter:toIntOrNull},index:{converter:toIntOrNull}},BI_TRACKING_SCHEMA.categories={items:{schema:BI_TRACKING_SCHEMA.category,type:BI_SCHEMA_TYPE.ARRAY}},BI_TRACKING_SCHEMA.trendingSearch={keyword:{converter:toStringOrNull},from:{converter:toStringOrNull},info:{converter:toStringOrNull},index:{converter:toIntOrNull}},BI_TRACKING_SCHEMA.trendingSearches={items:{schema:BI_TRACKING_SCHEMA.trendingSearch,type:BI_SCHEMA_TYPE.ARRAY}},BI_TRACKING_SCHEMA.searchMatchedShop={shopid:{converter:toIntOrNull},keyword:{converter:toStringOrNull}},BI_TRACKING_SCHEMA.officialShop={username:{converter:toStringOrNull},logo_url:{converter:toStringOrNull},seo_url:{converter:toStringOrNull},logo_pc_url:{converter:toStringOrNull},userid:{converter:toIntOrNull},shopid:{converter:toIntOrNull},shop_name:{converter:toStringOrNull},shop_collection_id:{converter:toIntOrNull},position:{converter:toIntOrNull}},BI_TRACKING_SCHEMA.officialShops={page_type:{converter:toIntOrNull},tab_index:{converter:toIntOrNull},catid:{converter:toIntOrNull},shop_infos:{schema:BI_TRACKING_SCHEMA.officialShop,type:BI_SCHEMA_TYPE.ARRAY}},BI_TRACKING_SCHEMA.officialShopWithPageInfo={page_type:{converter:toIntOrNull},tab_index:{converter:toIntOrNull},catid:{converter:toIntOrNull},shopInfo:{schema:BI_TRACKING_SCHEMA.officialShop,type:BI_SCHEMA_TYPE.OBJECT}},BI_TRACKING_SCHEMA.officialShopSeeMore={page_type:{converter:toIntOrNull},tab_index:{converter:toIntOrNull},catid:{converter:toIntOrNull},type:{converter:toStringOrNull}},BI_TRACKING_SCHEMA.activityBanner={banner_url:{converter:toStringOrNull},page_type:{converter:toIntOrNull},tab_index:{converter:toIntOrNull},catid:{converter:toIntOrNull},banner_index:{converter:toIntOrNull}},BI_TRACKING_SCHEMA.officialShopTabShow={tab_index:{converter:toIntOrNull}},BI_TRACKING_SCHEMA.TrackingItem={itemid:{converter:toIntOrNull},modelid:{converter:toIntOrNull},free_shipping:{converter:toBoolOrNull,dataField:["show_free_shipping"]},discount:{converter:toIntOrNull,dataField:["raw_discount"]},shopid:{converter:toIntOrNull},is_prefered:{converter:toBoolOrNull,dataField:["is_shopee_verified"]},location:{converter:toIntOrNull,dataField:["batch_item_index","itemIndex"]},location_in_ads:{converter:function(e){return toIntOrNull(e)&&toIntOrNull(BJUtil.calculateLocationInAds(e))},dataField:["batch_item_index"]},ads_keyword:{converter:toStringOrNull},adsid:{converter:toIntOrNull},likes:{converter:toIntOrNull,dataField:["liked_count"]},rating:{converter:toFloatOrNull,dataField:["rating_star"]},algorithm:{converter:toStringOrNull}},BI_TRACKING_SCHEMA.TrackingMarketingToken={medium_type:{converter:toIntOrNull},medium_id:{converter:toStringOrNull}},BI_TRACKING_SCHEMA.Tracking={log_timestamp:{converter:toIntOrNull},userid:{converter:toIntOrNull},deviceid:{converter:toStringOrNull},country:{converter:toStringOrNull},event_timestamp:{converter:toIntOrNull},platform:{converter:toIntOrNull},client_ip:{converter:toStringOrNull},wifi:{converter:toBoolOrNull},os:{converter:toStringOrNull},os_version:{converter:toStringOrNull},brand:{converter:toStringOrNull},model:{converter:toStringOrNull},app_version:{converter:toStringOrNull},browser:{converter:toStringOrNull},browser_version:{converter:toStringOrNull},refer_page:{converter:toIntOrNull},refer_url:{converter:toStringOrNull},marketing_token:{schema:BI_TRACKING_SCHEMA.TrackingMarketingToken,type:BI_SCHEMA_TYPE.OBJECT},operation:{converter:toIntOrNull},page_type:{converter:toIntOrNull},default_page_type:{converter:toStringOrNull},page_section:{converter:toIntOrNull},default_page_section:{converter:toStringOrNull},target_type:{converter:toIntOrNull},default_target_type:{converter:toStringOrNull},item:{schema:BI_TRACKING_SCHEMA.TrackingItem,type:BI_SCHEMA_TYPE.ARRAY},signature:{converter:toStringOrNull},token:{converter:toStringOrNull}},BI_TRACKING_SCHEMA.TrackingPageState={id:{converter:toStringOrNull},pageType:{converter:toStringOrNull},initial:{converter:toBoolOrNull},isBack:{converter:toBoolOrNull},pageParams:{converter:toStringOrNull}},BI_TRACKING_SCHEMA.TrackingAction={action:{converter:toStringOrNull},data:{converter:toStringOrNull}},BI_TRACKING_SCHEMA.TrackingV2EventBase={type:{converter:toStringOrNull},source:{converter:toStringOrNull},timestamp:{converter:toFloatOrNull}},BI_TRACKING_SCHEMA.TrackingPageStateEvent=$.extend(!0,{info:{schema:BI_TRACKING_SCHEMA.TrackingPageState,type:BI_SCHEMA_TYPE.OBJECT}},BI_TRACKING_SCHEMA.TrackingV2EventBase),BI_TRACKING_SCHEMA.TrackingActionEvent=$.extend(!0,{info:{schema:BI_TRACKING_SCHEMA.TrackingAction,type:BI_SCHEMA_TYPE.OBJECT}},BI_TRACKING_SCHEMA.TrackingV2EventBase),BI_TRACKING_SCHEMA.cartRecommendationItem={itemid:{converter:toIntOrNull},shopid:{converter:toIntOrNull},index:{converter:toIntOrNull}},BI_TRACKING_SCHEMA.cartRecommendationItems={items_info:{
schema:BI_TRACKING_SCHEMA.cartRecommendationItem,type:BI_SCHEMA_TYPE.ARRAY},empty_cart:{converter:toBoolOrNull}};var BI_GENERATED_ACTIONS={clickCategory:{schema:BI_TRACKING_SCHEMA.category,type:BI_SCHEMA_TYPE.OBJECT},trackTrendingSearchClick:{schema:BI_TRACKING_SCHEMA.trendingSearch,type:BI_SCHEMA_TYPE.OBJECT},exposeCategory:{schema:BI_TRACKING_SCHEMA.categories,type:BI_SCHEMA_TYPE.OBJECT},exposeTrendingSearch:{schema:{items:{schema:BI_TRACKING_SCHEMA.trendingSearch,type:BI_SCHEMA_TYPE.ARRAY}},type:BI_SCHEMA_TYPE.OBJECT},exposeSearchMatchedShop:{schema:BI_TRACKING_SCHEMA.searchMatchedShop,type:BI_SCHEMA_TYPE.OBJECT},trackOfficialShopImpressions:{schema:BI_TRACKING_SCHEMA.officialShops,type:BI_SCHEMA_TYPE.OBJECT},trackOfficialShopClick:{schema:BI_TRACKING_SCHEMA.officialShopWithPageInfo,type:BI_SCHEMA_TYPE.OBJECT},officialShopClickSeeMore:{schema:BI_TRACKING_SCHEMA.officialShopSeeMore,type:BI_SCHEMA_TYPE.OBJECT},clickActivityBanner:{schema:BI_TRACKING_SCHEMA.activityBanner,type:BI_SCHEMA_TYPE.OBJECT},officialShopTabShow:{schema:BI_TRACKING_SCHEMA.officialShopTabShow,type:BI_SCHEMA_TYPE.OBJECT},updateWrongCategoryEdit:{schema:BI_TRACKING_SCHEMA.productWithPageType,type:BI_SCHEMA_TYPE.OBJECT,alias:"update_wrong_category_edit"},trackCartRecommendationItemsClick:{schema:BI_TRACKING_SCHEMA.cartRecommendationItems,type:BI_SCHEMA_TYPE.OBJECT},trackCartRecommendationItemsScroll:{schema:BI_TRACKING_SCHEMA.cartRecommendationItems,type:BI_SCHEMA_TYPE.OBJECT}},BI_GENERATED_SERIALIZED_ACTIONS={trackingWithProto:{schema:BI_TRACKING_SCHEMA.Tracking,type:BI_SCHEMA_TYPE.OBJECT}},BI_GENERATED_V2_TRACKING_ACTIONS={trackingPageStateEventV2:{schema:BI_TRACKING_SCHEMA.TrackingPageStateEvent,type:BI_SCHEMA_TYPE.OBJECT},trackingActionEventV2:{schema:BI_TRACKING_SCHEMA.TrackingActionEvent,type:BI_SCHEMA_TYPE.OBJECT}},SOURCE={WEB:"web",ANDROID:"android_app",IOS:"ios_app",UNKNOWN:"unknown"},QOS_TYPE={HTML:"HTML",PLV:"PLV"},TRACKING_V2_EVENT_TYPE={PAGESTATE:"pageState",ACTION:"action"},BI_TRACKING_PROTO_GENERAL_INFO={},pageLoadedTimestamp=+new Date,BI_ANALYTICS=function(){function e(){return+new Date}function t(t){return{type:t,source:"mweb",timestamp:e()}}function i(e){var i=null;window.NO_DATA&&(i={no_data:1}),Se(e,BI_ACTIONS.pageView,i);var n=e.split(/[?#]/)[0],a=e.replace(n,""),o={pageType:n,initial:!Ne,isBack:Ne,id:pageLoadedTimestamp,pageParams:a};BI_ANALYTICS.trackingPageStateEventV2({info:o},t(TRACKING_V2_EVENT_TYPE.PAGESTATE)),Ne=!0}function n(e,t){Se(e,BI_ACTIONS.seoPageView,{pageType:"shop",extraData:{shopid:t}})}function a(e,t){console.log("qos: ",e,t),Se(location.href,BI_ACTIONS.qos,{type:e,ms:t})}function o(e,t){Se(location.href,BI_ACTIONS.removeCartItems,{shopid:e||null,itemids:t||[]})}function r(){Se(location.href,BI_ACTIONS.placeOrder)}function l(e,t){Se(location.href,BI_ACTIONS.clickHashtagItem,{itemid:e||null,hashtag:t||null})}function c(e,t,i,n){Se(location.href,BI_ACTIONS.clickSearchItem,{itemid:t||null,keyword:e||null,shopid:i||null,idx:n||null})}function s(e,t,i,n){Se(location.href,BI_ACTIONS.clickDailyDiscoverItem,{itemid:t||null,shopid:i||null,from:n||null})}function d(e,t,i,n){Se(location.href,BI_ACTIONS.clickYouMayAlsoLikeItem,{itemid:t||null,shopid:i||null,from:n||null})}function p(e,t){Se(location.href,BI_ACTIONS.trackHashtagScroll,{itemids:e||null,hashtag:t||null})}function u(e,t){Se(location.href,BI_ACTIONS.trackCollectionScroll,{itemids:e||null,collection_id:t||null})}function f(e,t){Se(location.href,BI_ACTIONS.trackSearchItemScroll,{itemids:e||null,keyword:t||null})}function h(e,t){Se(location.href,BI_ACTIONS.trackSubcategoryScroll,{itemids:e||null,category_id:t||null})}function g(e,t,i){Se(location.href,BI_ACTIONS.trackCategoryScroll,{itemids:e||null,category_id:t||null,tab:i})}function m(e,t){Se(location.href,BI_ACTIONS.trackShopItemScroll,{itemids:e||null,shopid:t||null})}function s(e,t,i,n){Se(location.href,BI_ACTIONS.clickDailyDiscoverItem,{itemid:t||null,shopid:i||null,from:n||null})}function v(e){Se(location.href,BI_ACTIONS.trackDailyDiscoverScroll,e)}function I(e){Se(location.href,BI_ACTIONS.trackHomeDailyDiscoverScroll,e)}function S(e,t){Se(location.href,BI_ACTIONS.trackShopLikeScroll,{itemids:e||null,shopid:t||null})}function C(e){Se(location.href,BI_ACTIONS.trackSellerCollectionScroll,{itemids:e||null})}function A(e,t,i,n,a,o,r){Se(location.href,BI_ACTIONS.trackGenericScroll,{keyword:o||"",items_info:e||[],sort_type:n||"",page_type:i||window.PAGE_TYPE||0,tab_index:window.tabIndexForBI,catid:window.catid,order:a||"",suggestedWords:r||[]})}function T(e,t,i,n,a,o,r,l){Se(location.href,BI_ACTIONS.trackGenericClick,{keyword:o||"",items_info:e?[e]:[],item_index:r||-1,page_type:i||window.PAGE_TYPE||0,tab_index:window.tabIndexForBI,catid:window.catid,sort_type:n||"",order:a||"",suggestedWords:l||[]})}function w(e,t,i,n,a,o){Se(location.href,BI_ACTIONS.trackGenericSortType,{keyword:e||"",page_type:t||0,sort_type:i||"",order:n||"",suggestedWords:o||[]})}function O(e,t,i,n,a){Se(location.href,BI_ACTIONS.trackGenericSearchPageView,{keyword:e||"",page_type:t||0,count:i||0,suggestedWords:a||[]})}function E(e,t){Se(location.href,BI_ACTIONS.viewItemPageRecommend,{items:e||null})}function k(e,t){Se(location.href,BI_ACTIONS.voteFAQAnswer,{articleId:e,useful:t})}function b(e,t,i,n){Se(location.href,BI_ACTIONS.clickItemPageButton,{shopid:t,itemid:i,button_type:n})}function y(e,t){Se(location.href,BI_ACTIONS.didPlaceOrder,{checkoutid:e,order_itemids:t})}function N(e){Se(location.href,BI_ACTIONS.trackSearchFilterApplied,e)}function P(e,t,i,n){Se(location.href,BI_ACTIONS.clickSearchAutoCorrectionItem,{keyword:t,suggestion:i,suggestedWords:n||[]})}function R(t,i){Se(location.href,BI_ACTIONS.clickSeeMore,{userid:t,timestamp:e(),type:i,page_type:101})}function B(t,i){Se(location.href,BI_ACTIONS.clickSeeMore,{userid:t,timestamp:e(),type:i,page_type:106})}function H(t,i){Se(location.href,BI_ACTIONS.clickSeeMore,{userid:t,timestamp:e(),type:i,page_type:113})}function M(t,i){Se(location.href,BI_ACTIONS.clickSeeMore,{userid:t,timestamp:e(),type:i,page_type:109})}function D(t,i,n,a){Se(location.href,BI_ACTIONS.clickFilterBar,{userid:t,page_type:i||null,filter:n,value:a,timestamp:e()})}function x(t,i){Se(location.href,BI_ACTIONS.clickFilterPanel,{userid:t,page_type:i||null,timestamp:e()})}function L(t,i,n,a){Se(location.href,BI_ACTIONS.clickFilterMore,{userid:t,page_type:i||null,filter_type:n,expanded:a,timestamp:e()})}function U(t,i,n,a){Se(location.href,BI_ACTIONS.clickFilterBarButton,{userid:t,page_type:i||null,filter_type:n,expanded:a,timestamp:e()})}function G(e,t,i,n){Se(location.href,BI_ACTIONS.clickColorfulBlock,{page_type:t||null,content:i,position:n})}function F(e,t,i,n,a){Se(location.href,BI_ACTIONS.trackVideoPlay,{shopid:t,itemid:i,videoid:n,is_fullscreen:a||!1})}function V(e,t,i,n){Se(location.href,BI_ACTIONS.clickRatingShortcut,{ordrerid:t,itemid:i,shortcut:n})}function J(e,t,i){Se(location.href,BI_ACTIONS.trackRatingFilterClick,{type:t,filter:i})}function K(e,t){Se(location.href,BI_ACTIONS.clickSearchMoreUsers,{keyword:t||null})}function W(){function e(e,t,i){var n={};for(var a in e)if(e.hasOwnProperty(a)){var o=e[a],r=e[a].alias||a;n[a]=Y(r,o,t,i)}return n}var t={},i=e(BI_GENERATED_ACTIONS),n=e(BI_GENERATED_SERIALIZED_ACTIONS,!0),a=e(BI_GENERATED_V2_TRACKING_ACTIONS,null,!0);return _.extend(t,i),_.extend(t,n),_.extend(t,a),t}function Y(t,i,n,a){return function(o,r){try{var l={};n?(_.extend(l,BI_TRACKING_PROTO_GENERAL_INFO),_.extend(l,o),_.extend(l,{event_timestamp:e()}),r&&_.extend(l,r),_.extend(l,j(l,i))):(_.extend(l,j(o,i)),r&&_.extend(l,r)),n?Ae(l):a?Ce(l):Se(location.href,t,l)}catch(c){console.error("bi_tracking_exception",c.message),BJUtil.sentryLog("bi_tracking_exception",{message:c.message,url:location.href,isShopeeApp:isShopeeApp(),isIOS:isIOS(),appver:window.APPVER},"error")}}}function j(e,t){if(null!==e&&void 0!==e){var i=t.converter,n=t.type;if(i&&(n=BI_SCHEMA_TYPE.RAW),void 0==n&&void 0==i&&(n=BI_SCHEMA_TYPE.NESTED_SCHEMA),n===BI_SCHEMA_TYPE.ARRAY){if(!_.isArray(e))return void console.error("Schema type is not matched! obj should be Array.");var a=t.schema;return toArrayOrNull(_.map(e,function(e){return j(e,a)}))}if(n===BI_SCHEMA_TYPE.RAW)return i(e);if(n===BI_SCHEMA_TYPE.OBJECT||n===BI_SCHEMA_TYPE.NESTED_SCHEMA){if(!_.isObject(e))return void console.error("Schema type is not matched! obj should be object");var o={},a=n===BI_SCHEMA_TYPE.NESTED_SCHEMA?t:t.schema;for(var r in a)if(a.hasOwnProperty(r)){for(var l=null,c=a[r].dataField||[r],s=0;s<c.length;s++){var d=c[s];void 0!==e[d]&&(l=e[d])}o[r]=j(l,a[r])}return o}console.error("Unknown issue (missing schema type).")}}function q(e,t,i){Se(location.href,BI_ACTIONS.sendToCartAfterPlaceOrder,{checkoutid:e},t,i)}function z(e){Se(location.href,BI_ACTIONS.shippingOptionChanged,{itemlist:e||null})}function Q(e){Se(location.href,BI_ACTIONS.clickCheckout,e)}function X(e){Se(location.href,BI_ACTIONS.viewDeliveryAddress,e)}function Z(e){Se(location.href,BI_ACTIONS.clickShippingOption,e)}function ee(e){Se(location.href,BI_ACTIONS.clickNewAddressSubmit,e)}function te(e){Se(location.href,BI_ACTIONS.clickEditAddressSubmit,e)}function ie(e){Se(location.href,BI_ACTIONS.viewMyAddress,e)}function ne(e){Se(location.href,BI_ACTIONS.clickSetAsDefaultAddress,e)}function ae(e){Se(location.href,BI_ACTIONS.viewShipping,e)}function oe(e){Se(location.href,BI_ACTIONS.clickPaymentOption,e)}function re(e){Se(location.href,BI_ACTIONS.viewPaymentOption,e)}function le(e){Se(location.href,BI_ACTIONS.clickConfirmInformation,e)}function ce(e){Se(location.href,BI_ACTIONS.clickCreditCardSubmit,e)}function se(e){Se(location.href,BI_ACTIONS.viewConfirmation,e)}function de(e){Se(location.href,BI_ACTIONS.clickDeliveryAddressChange,e)}function _e(e){Se(location.href,BI_ACTIONS.clickPaymentMethodChange,e)}function pe(e){Se(location.href,BI_ACTIONS.clickShippingOptionChange,e)}function ue(e){Se(location.href,BI_ACTIONS.trackCustomCollectionCardImpression,e)}function fe(e){Se(location.href,BI_ACTIONS.trackCustomCollectionCardClick,e),console.log(e)}function he(e){Se(location.href,BI_ACTIONS.clickCustomCollectionModuleSeeMore,e)}function ge(e){Se(location.href,BI_ACTIONS.trackMePageButtonClick,e)}function me(e){console.log(e),Se(location.href,BI_ACTIONS.trackMePageItemClick,e)}function ve(e){Se(location.href,BI_ACTIONS.trackMePageItemBoostNowClick,e)}function Ie(){return isShopeeWeb()?SOURCE.WEB:isIOS()?SOURCE.IOS:isAndroid()?SOURCE.ANDROID:SOURCE.UNKNOWN}function Se(i,n,a,o,r){o=o||function(){},r=r||function(){},ye.then(function(){if(window.LOCALHOST)o();else try{a=a||{},a.timestamp=e(),a.userid=window.USERID||null;var l={signature:ke,action:n,url:i,hash:be,source:Ie()};a&&(l.data=JSON.stringify(a));var c={device_fingerprint:BI_TRACKING_PROTO_GENERAL_INFO.deviceid,client_timestamp:e(),app_version:getAppVersion()};c&&(l.meta=JSON.stringify(c)),$.ajax(Oe,{type:"POST",contentType:"application/json",data:JSON.stringify(l),success:o}).fail(function(e){console.log("report BI analytics failed"),r(e)});var s={action:n,data:JSON.stringify(a)};BI_ANALYTICS.trackingActionEventV2({info:s},t(TRACKING_V2_EVENT_TYPE.ACTION))}catch(d){console.error(d)}})}function Ce(e){if(!window.LOCALHOST)try{bridgeInit(function(){window.LOCALHOST&&console.log(e);var t=JSON.stringify([e]),i=getAppVersion();(isIOS()&&i>=21509||isAndroid()&&i>=21507)&&bridgeCallHandler("trackBIEvent",{events:t})})}catch(t){console.error(t)}}function Ae(e,t){var i=bi_tracking_serializer.serializeTracking(e);if(window.LOCALHOST)t&&t(e);else try{window.LOCALHOST&&(console.log(e),console.log(i));var n={Data:[JSON.stringify(i)]};$.ajax(Ee,{type:"POST",contentType:"application/json",data:JSON.stringify(n)}).fail(function(){console.error("sendSerializedTracking failed")}).always(function(){t&&t(e)})}catch(a){console.error(a)}}function Te(e){if(e||(e=$.Deferred()),ye){var t=ye;e.then(function(){t.resolve()})}ye=e}function we(){ye&&ye.resolve()}$.cookie.raw=!0;var Oe="/userstats_record",Ee=Oe+"/batchtracking",ke=$.cookie(window.T_BI_SIG),be=$.cookie(window.T_BI_IV),ye=$.Deferred().resolve(),Ne=!1,Pe=W(),Re={pageView:i,seoPageView:n,removeCartItems:o,placeOrder:r,didPlaceOrder:y,clickHashtagItem:l,clickSearchItem:c,clickDailyDiscoverItem:s,clickYouMayAlsoLikeItem:d,trackHashtagScroll:p,trackCollectionScroll:u,trackShopItemScroll:m,trackShopLikeScroll:S,trackSearchItemScroll:f,trackSubcategoryScroll:h,trackDailyDiscoverScroll:v,trackHomeDailyDiscoverScroll:I,trackCategoryScroll:g,trackSellerCollectionScroll:C,trackGenericScroll:A,trackGenericClick:T,trackGenericSortType:w,trackGenericSearchPageView:O,viewItemRecommend:E,voteFAQAnswer:k,clickItemPageButton:b,trackSearchFilterApplied:N,clickSearchAutoCorrectionItem:P,clickDailyDiscoverSeeMore:R,clickPopularProdSeeMore:B,clickFlashDealSeeMore:H,clickOfficialSeeMore:M,trackVideoPlay:F,clickRatingShortcut:V,qos:a,trackRatingFilterClick:J,clickFilterBar:D,clickFilterPanel:x,clickFilterMore:L,clickFilterBarButton:U,clickColorfulBlock:G,clickSearchMoreUsers:K,sendToCartAfterPlaceOrder:q,shippingOptionChanged:z,clickCheckout:Q,viewDeliveryAddress:X,clickShippingOption:Z,clickNewAddressSubmit:ee,clickEditAddressSubmit:te,viewMyAddress:ie,clickSetAsDefaultAddress:ne,viewShipping:ae,clickPaymentOption:oe,viewPaymentOption:re,clickConfirmInformation:le,clickCreditCardSubmit:ce,viewConfirmation:se,clickDeliveryAddressChange:de,clickPaymentMethodChange:_e,clickShippingOptionChange:pe,trackCustomCollectionCardImpression:ue,trackCustomCollectionCardClick:fe,clickCustomCollectionModuleSeeMore:he,trackMePageButtonClick:ge,trackMePageItemClick:me,trackMePageItemBoostNowClick:ve};_.extend(Re,Pe);var Be={pauseSend:Te,resumeSend:we,getV2TrackingEventBaseData:t};return _.extend(Be,Re),Be}();$(function(){function e(){return location.pathname+location.search}function t(){var e=document.createElement("a");return e.href=document.referrer,e.pathname+e.search}function i(){var e={IOS_WEB:bi_tracking_serializer.TrackingPlatformType.PLATFORM_TYPE_IOS_WEB,IOS_APP:bi_tracking_serializer.TrackingPlatformType.PLATFORM_TYPE_IOS_APP,ANDROID_WEB:bi_tracking_serializer.TrackingPlatformType.PLATFORM_TYPE_ANDROID_WEB,ANDROID_APP:bi_tracking_serializer.TrackingPlatformType.PLATFORM_TYPE_ANDROID_APP,PC_MALL:bi_tracking_serializer.TrackingPlatformType.PLATFORM_TYPE_PC_MALL,OTHERS:bi_tracking_serializer.TrackingPlatformType.PLATFORM_TYPE_OTHERS};return isAndroid()?isShopeeApp()?e.ANDROID_APP:e.ANDROID_WEB:isIOS()?isShopeeApp()?e.IOS_APP:e.IOS_WEB:e.OTHERS}function n(){bridgeInit(function(){var e=window.WebViewJavascriptBridge;bridgeCallHandler("getAppInfo",{},function(e){var t=e.deviceFingerprint;BI_TRACKING_PROTO_GENERAL_INFO.deviceid=t}),e&&e.callHandler("hasHandler",{handler:"getNetworkInfo"},function(t){0!=t.status&&e.callHandler("getNetworkInfo","",function(e){BI_TRACKING_PROTO_GENERAL_INFO.wifi=1==e.networkType})})}),BI_TRACKING_PROTO_GENERAL_INFO.country=window.LOCALE,BI_TRACKING_PROTO_GENERAL_INFO.userid=window.USERID,BI_TRACKING_PROTO_GENERAL_INFO.platform=i(),BI_TRACKING_PROTO_GENERAL_INFO.os=navigator&&navigator.appVersion,BI_TRACKING_PROTO_GENERAL_INFO.os_version=void 0,BI_TRACKING_PROTO_GENERAL_INFO.brand=void 0,BI_TRACKING_PROTO_GENERAL_INFO.model=void 0,BI_TRACKING_PROTO_GENERAL_INFO.app_version=window.APPVER||window.VERSION,BI_TRACKING_PROTO_GENERAL_INFO.browser=void 0,BI_TRACKING_PROTO_GENERAL_INFO.browser_version=void 0,BI_TRACKING_PROTO_GENERAL_INFO.refer_page=void 0,BI_TRACKING_PROTO_GENERAL_INFO.refer_url=t(),BI_TRACKING_PROTO_GENERAL_INFO.signature=$.cookie(window.T_BI_SIG),BI_TRACKING_PROTO_GENERAL_INFO.token=$.cookie(window.T_BI_IV);var e=parse_get_params(location.search);if(e&&e[window.MARKET_TRACKING_TOKEN_NAME]){var n=e[window.MARKET_TRACKING_TOKEN_NAME].split(".");BI_TRACKING_PROTO_GENERAL_INFO.marketing_token={medium_type:n[0],medium_id:n[1]}}}function a(e){return!!isShopeeApp()&&(connectWebViewJavascriptBridge(function(){e()}),!0)}function o(){var e=document.visibilityState||document.webkitVisibilityState;e&&"visible"==e.toLowerCase()&&c()}var r="_BI_PAGE_REF_";a(function(){window.WebViewJavascriptBridge&&window.WebViewJavascriptBridge.addHook(function(t,i){"navigate"==t&&bridgeCallHandler("save",{key:r,data:e(),persist:0},function(){})})});var l=null;setTimeout(function(){var e=a(function(){bridgeCallHandler("load",{key:r,persist:0},function(e){e&&e.data&&(l=e.data),bridgeCallHandler("save",{key:r,data:"",persist:0},function(){}),BI_ANALYTICS.pageView(_bi_addGSrcToUrl(location.href,l))})});e||(l=t(),BI_ANALYTICS.pageView(_bi_addGSrcToUrl(location.href,l)))},500);var c=_.debounce(function(){BI_ANALYTICS.pageView(_bi_addGSrcToUrl(location.href,l))},500,!0);isAndroid()&&isShopeeApp()?bridgeInit(function(){bridgeRegisterHandler("viewWillReappear",o),bridgeRegisterHandler("tabShow",o)}):document.addEventListener("visibilitychange",o),n()});var AdsTrackingOperationType={IMPRESSION:1,CLICK:2,VIEW:3,ADD_TO_CART:4,PLACE_ORDER:5,SHOP_IMPRESSION:1001,SHOP_CLICK:1002},AdsTrackingAcceptKeys={root:["items","filterData","keyword","shops","list_type","searchConfigs"],item:["item","keyword","filterData","list_type","searchConfigs"],shop:["shop","keyword","filterData","list_type","searchConfigs"],query:["filterData","item","keyword","searchConfigs"]},ADS_TRACKING=function(){function e(){function e(e){var t=e&&e.deviceid||null,i=window.USERID,n=r(),a=LOCALE;ShopeeLib.Adc.init({userid:i,deviceid:t,platform:n,country:a},l);f.resolve()}if(f=$.Deferred(),!ShopeeLib||!ShopeeLib.Adc)return console.log("Missing ShopeeLib, cannot track."),f;var t=window.WebViewJavascriptBridge;return t?bridgeCallHandler("getAppInfo",{},function(t){var i=t.deviceFingerprint;e({deviceid:i})}):e(),f}function t(e,t){f.then(function(){try{var n=o(t,AdsTrackingAcceptKeys.root),r=_.map(n.items,function(e){return i(_.extend(o(n,AdsTrackingAcceptKeys.item),{item:e}))}),l=_.map(n.shops,function(e){return a(_.extend(o(n,AdsTrackingAcceptKeys.shop),{shop:e}))});ShopeeLib.Adc.collect(e,r,l)}catch(c){console.error("ads_collect_exception",c.message),BJUtil.sentryLog("ads_collect_exception",{message:c.message,url:location.href,isShopeeApp:isShopeeApp(),isIOS:isIOS(),appver:window.APPVER},"error")}})}function i(e){var t=o(e,AdsTrackingAcceptKeys.item),i={},a=t.item;return a&&(i.itemid=s(a.itemid),i.shopid=s(a.shopid),i.discount=s(a.raw_discount),i.free_shipping=d(strtobool(a.show_free_shipping)),i.is_prefered=d(strtobool(a.is_shopee_verified)),i.algorithm=p(a.algorithm),i.location=s(a.batch_item_index),i.refer_urls=u(a.refer_urls||[]),i.adsid=s(a.adsid||0),i.location_in_ads=s(BJUtil.calculateLocationInAds(a.batch_item_index)),i.campaignid=s(a.campaignid||0),i.ads_keyword=p(a.ads_keyword),i.match_type=s(a.match_type)),i.query=n(t),i.list_type=p(t.list_type),i}function n(e){var t=o(e,AdsTrackingAcceptKeys.query),i={},n=t.item;n&&(i.keyword=p(n.searchKeyword),i.sorttype=s(n.sortType),i.colorful_blocks=u(_.map(n.colorfulBlocks,p))),i.keyword||(i.keyword=p(t.keyword));var a=t.filterData;a&&(i.filter_price_min=s(strtobool(a.price_min)?1:0),i.filter_price_max=s(strtobool(a.price_max)?1:0),i.filter_include_sf=s(a.shipping_fee_included?1:0),i.filter_with_discount=s(a.with_discount?1:0),i.wholesale=s(a.wholesale?1:0),i.filter_attribute=s(a.categoryids?1:0),i.filter_item_condition=s(a.conditions?1:0),i.filter_user_verified=s(a.shopee_verified?1:0));var r=t.searchConfigs;return r&&(i.filters=[{match_type:s(c(r)),match_id:u(s(r.match_id)),hashtag:u(p(r.hashtag))}]),i}function a(e){var t=o(e,AdsTrackingAcceptKeys.shop),i={},a=t.shop;return a&&(i.shopid=s(a.shopid),i.algorithm=p(a.algorithm),i.refer_urls=u(a.refer_urls||[]),i.location=s(a.position)),i.list_type=p(t.list_type),i.query=n(t),i}function o(e,t){return $.isArray(e)?_.map(e,function(e){return _.pick(e,t)}):_.pick(e,t)}function r(){var e={IOS_WEB:1,IOS_APP:2,ANDROID_WEB:3,ANDROID_APP:4,PC_MALL:5,OTHERS:128};return isAndroid()?isShopeeApp()?e.ANDROID_APP:e.ANDROID_WEB:isIOS()?isShopeeApp()?e.IOS_APP:e.IOS_WEB:e.OTHERS}function l(e,t){var i=new XMLHttpRequest;i.open("POST",e,!0),i.send(JSON.stringify(t))}function c(e){if(e){var t,i=e.page_type,n=e.match_id,a=e.categoryids,o=e.hashtag,r=e.keyword,l=e.shop_categoryids;return"collection"==i&&n?t=Constants.MatchTypeIndex.MATCH_COLLECTION:"search"==i&&n&&$.isEmptyObject(a)?t=Constants.MatchTypeIndex.MATCH_CATEGORY:"hashtag"==i&&o?t=Constants.MatchTypeIndex.MATCH_HASHTAG:"shop"==i&&n?t=Constants.MatchTypeIndex.MATCH_SHOP:"attribute"==i&&n&&r&&(t=Constants.MatchTypeIndex.MATCH_ATTRIBUTE),a&&!$.isEmptyObject(a)&&(t=Constants.MatchTypeIndex.MATCH_CATEGORY),l&&!$.isEmptyObject(l)&&(t=Constants.MatchTypeIndex.MATCH_SHOP_CATE),t}}function s(e){var t=parseInt(e);return isNaN(t)?null:t}function d(e){return e===!0||e===!1?e:null}function p(e){return null===e||void 0===e?null:String(e)}function u(e){return Array.isArray(e)?e:null===e||void 0===e?null:[e]}var f;return{initAdsTracking:e,collectAdsTracking:t}}();window.i18njs&&(i18n.t("alert_follow_limit"),i18n.t("alert_follow_too_frequent"),i18n.t("msg_server_error"));var BJUtil=function(){function e(e){}function t(){return window.SIMPLE_VERSION}function i(e){isWeChat()?document.title=e+" - "+get_shopee_brand():document.title=e;var t=window.WebViewJavascriptBridge;t&&t.callHandler("configureNavBarTitle",{title:e}),$(".header .page_name").text(e)}function n(e,t,i,n,a){var o=n||{};t&&(o.inCurrentPage=!0),a&&(o.popHistory=!0),i&&(o.target="_blank"),e.startsWith("//")?o.url=location.protocol+e:e.startsWith("/")?o.url=location.origin+e:o.url=e,bridgeCallHandler("navigate",o,function(e){})}function a(e,t){if(!($('iframe[src="'+e+'"]').length>0)){if(isAndroid())var i=$("<iframe/>",{"class":"modal-frame-android "+t,src:e});else{var i=$("<div/>",{"class":"modal-frame-holder-ios "+t}),n=$("<iframe/>",{"class":"modal-frame-ios",src:e});n.appendTo(i)}_t=t,i.appendTo("body"),i.delay(20).velocity({top:"0"},800,"easeInOutQuint"),setTimeout(function(){r()},820)}}function o(e){e||(e=_t,_t=null),$("."+e).velocity({top:"100%"},800,"easeInOutCubic",function(){$("."+e).remove()}),l()}function r(){var e=$("body");$(".page_hide").show(),e.attr("scrollTop",e.scrollTop()),e.css("height",0)}function l(){var e=$("body");e.css("height",""),e.scrollTop(e.attr("scrollTop")),e.attr("scrollTop",null),$(".page_hide").hide()}function c(e){if(pt.length>0)for(var t=0;t<pt.length;t++)pt[t](e)}function s(e){pt.push(e)}function d(e,t,i,n){if(null==n&&(n="GET"),"string"==typeof e)var a={type:n,url:e,data:t};else{var a=e;e=a.url,t=a.data,n=a.type}var o=$.ajax(a).done(function(n,a,o){if(p(n)){var r={url:e,sent_data:JSON.stringify(t),response_data:JSON.stringify(n)};u(e,r,"error")}i&&i(n)}).fail(function(i,n,a){if("abort"!=n&&"abort"!=a){"responseText"in i&&i.responseText.length>200&&(i.responseText=i.responseText.substr(0,200)+"...");var o={url:e,sent_data:JSON.stringify(t),response_data:JSON.stringify({xhr:i,status:n,error:a})};u(e,o,"fail")}});return o}function p(e){if("object"==typeof e)for(var t=["err","error","err_code","error_code"],i=0;i<t.length;i++){var n=t[i];if(n in e&&0!=e.error)return!0}return!1}function u(e,t,i){null==i&&(i="error");var n="/func/log/"+i+"/?url="+encodeURIComponent(e);t.csrfmiddlewaretoken=csrf,$.post(n,t)}function f(e,t,i){return d(e,t,i,"POST")}function h(e,t,i){return d(e,t,i,"GET")}function g(e){e.on("tap",function(t){C(v,{$like:e,e:t})})}function m(){window.ALERT_LIKE_PRIVACY_MSG&&(ALERT_LIKE_PRIVACY_MSG=!1,$.get("/timeline/api/set_no_alert_privacy/",function(){}),bridge=window.WebViewJavascriptBridge,bridge&&bridge.callHandler("showPopUp",{popUp:{message:i18n.t("label_your_activity_are_public"),buttonType:1,cancelText:i18n.t("label_change_setting"),okText:i18n.t("label_ok")}},function(e){1==e.buttonClicked&&bridge.callHandler("navigateAppPath",{path:"privacySettings"},function(){})}))}function v(e){m();var t=e.$like,i=e.e,n=t.data("shopid"),a=t.data("itemid"),o=t.data("feedid"),r=t.find(".number"),l=t.find(".icon"),c=t.attr("data-liked"),s=!a;if(i.preventDefault(),1==c){var d=isNaN(parseInt(r.text()))?0:parseInt(r.text()),_=s?"/buyer/unlike/feed/"+o+"/":"/buyer/unlike/shop/"+n+"/item/"+a+"/";r.text(--d>0?d:i18n.t("label_like")),t.attr("data-liked",0),l.removeClass("ic_feed_liked").addClass("ic_feed_like"),$.post(_,{csrfmiddlewaretoken:csrf}).fail(function(e){alert_message(msg_server_error)})}else{var d=isNaN(parseInt(r.text()))?0:parseInt(r.text()),p=s?"/buyer/like/feed/"+o+"/":"/buyer/like/shop/"+n+"/item/"+a+"/";r.text(++d),t.attr("data-liked",1),l.removeClass("ic_feed_like").addClass("ic_feed_liked"),$.post(p,{csrfmiddlewaretoken:csrf}).fail(function(e){alert_message(msg_server_error)})}}function I(e,t,i,n){e.on("tap",function(a){a.preventDefault(),a.stopPropagation(),C(S,{$follow:e,newwindow:t,e:a,aggressive:i,callback:n})})}function S(e){var t=e.$follow,i=e.e,n=(e.newwindow,e.aggressive),a=e.callback;i.stopPropagation();var o=t.data("shopid"),r=t.attr("data-followed");i.preventDefault(),i.stopPropagation(),1==r?(n&&(t=$(".follow[data-shopid="+o+"]"),a&&a(t,o,!1)),t.attr("data-followed",0),t.removeClass("followed"),t.html($("<span>+</span> <span>"+i18n.t("label_follow")+"</span>")),$.post("/buyer/unfollow/shop/"+o+"/",{csrfmiddlewaretoken:csrf}).fail(function(e){alert_message(msg_server_error)})):(n&&(t=$(".follow[data-shopid="+o+"]"),a&&a(t,o,!0)),t.attr("data-followed",1),t.addClass("followed"),t.html($("<span>"+i18n.t("label_following")+"</span>")),$.post("/buyer/follow/shop/"+o+"/",{csrfmiddlewaretoken:csrf}).fail(function(e){alert_message(msg_server_error)}))}function C(e,t){bridge=window.WebViewJavascriptBridge,bridge?bridge.callHandler("login",{},function(i){1==i.status&&e(t)}):loggedin?e(t):askLogin()}function A(e,t){var i="wUfxQfUPzffdyrer";if(!t)return e;if(t=t.sort(function(e,t){return t.length-e.length}),!t||0==t.length)return e;for(var n=0;n<t.length;n++){var a=t[n],o=new RegExp(a,"gi"),r=e.match(o);if(null!=r)for(var l in r)r.hasOwnProperty(l)&&(e=e.replace(r[l],'<a class="hashtag">'+i+r[l].substring(1)+"</a>"))}return e=e.replace(new RegExp(i,"gi"),"#")}function T(e,t,i,n){e.on("tap",function(e){e.stopPropagation();var a=i?$(this).data("hash").toString():$(this).text().substring(1);n&&n(a),E(a,t)})}function w(e,t){var i=new Date(1e3*parseInt(e.data("lastlogin"))),n=new Date,a=DateDiff.getDiffFull(i,n);if(0==a)e.html(i18n.t("label_online"));else{var o=t?i18n.t("label_ago").replace("__date__",a):i18n.t("label_active_date_ago").replace("__date__",a);e.html(o)}}function O(){var e=!1,t=window.APPVER||window.VERSION;t&&t/100>=202&&(e=!0);var i="";if(e)var n="ic_nva_share_app_no_padding";else var n="ic_nva_share_app";i=3==window.devicePixelRatio||2.99==window.devicePixelRatio?location.protocol+"//"+location.host+"/static/images/"+n+"_3x.png":2==window.devicePixelRatio?location.protocol+"//"+location.host+"/static/images/"+n+"_2x.png":location.protocol+"//"+location.host+"/static/images/"+n+".png",console.log(i);var a={type:"button",key:"share",text:i18n.t("label_share"),iconUrl:i};return a}function E(e,t,i){if(isShopeeWeb()&&!i)return void SeoUtil.navigateHashtagSeo(e);var a=encodeURIComponent("#"+(""+e).toLocaleLowerCase()),o={is_hashtag:1,hashtag:a};if(i){var r=location.origin+"/search-item/?is_hashtag=1&hashtag="+a;r+="&search="+encodeURIComponent(i);getSearchNativeTabs(r);o[search]=i}else{var r=location.origin+"/category-item/?is_hashtag=1&hashtag="+a;getCategoryNativeTabs(r,!0)}if(window.BI_ANALYTICS){var l={action:"search",data:JSON.stringify(o)};BI_ANALYTICS.trackingActionEventV2({info:l},BI_ANALYTICS.getV2TrackingEventBaseData(TRACKING_V2_EVENT_TYPE.ACTION))}if(BJUtil.isRNEnabled("search")){var c={module:"SEARCH_RESULT_PAGE"};_.extend(c,o),BJUtil.navigateReactNative(c)}else n(r,!1,t,{url:r,preloadKey:"search",navbar:k(e,i)})}function k(e,t){var i={};i.title="#"+decodeURIComponent(e);var n=[{type:"search"}];return isIOS()&&(i.showSearch=isVer22Plus()?1:0,t&&(i.showSearch=1)),n.push({type:"button",key:"filter",iconType:"filter",iconText:i18n.t("label_filter")}),t&&(i.searchText=decodeURIComponent(t)),isVer22Plus()?i.searchPlaceholder=decodeHTMLEncode("#"+e):i.searchPlaceholder=i18n.t("label_search_in")+" "+decodeHTMLEncode("#"+e),i.searchPlaceholderActive=i18n.t("label_search_in")+" "+decodeHTMLEncode("#"+e),i.searchMatchType=4,i.searchMatchValue=e,i.searchHotwords={0:[]},i.rightItemsConfig={items:n},i.searchType=1,i}function b(e,t,i){if(i){var a=e.indexOf("?")>=0?"&":"?";e+=a+"search="+encodeURIComponent(i);getSearchNativeTabs(e)}else{getCategoryNativeTabs(e,!0,!0)}n(e,!1,!0,{url:e,navbar:y(e,t,i)})}function y(e,t,i){var n={},a="/collections/",o=e.indexOf(a),r=e.substr(o+a.length);if(!parseInt(r))throw new Error("collection url is invalid!! must follow the format");n.title=t;var l=[{type:"search"}];return isIOS()&&(n.showSearch=isVer22Plus()?1:0,i&&(n.showSearch=1)),l.push({type:"button",key:"filter",iconType:"filter",iconText:i18n.t("label_filter")}),i&&(n.searchText=i),isVer22Plus()?n.searchPlaceholder=decodeHTMLEncode(t):n.searchPlaceholder=i18n.t("label_search_in")+" "+decodeHTMLEncode(t),n.searchPlaceholderActive=i18n.t("label_search_in")+" "+decodeHTMLEncode(t),n.searchMatchType=3,n.searchMatchValue=r,n.searchHotwords={0:[]},n.rightItemsConfig={items:l},n.searchType=1,n}function N(e){e.off("tap").on("tap",function(t){t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation(),n(e.attr("href"),!1,!1,{})})}function P(e,t,i,a,o){e.on("tap",function(r){var l=$(this);if(!o||o(l)){var c=l.data("shopid"),s=l.data("username"),d=l.data("shopcat_id");if(c){if(isShopeeWeb()&&s){var _=SeoUtil.getShopUrlSeo(s);d&&(_=generateGetUri(_,{shopcat_id:d})),n(_)}else{var _="/shop/";$.isEmptyObject(a)||(_=_+"?"+$.param(a)),_+="#shopid="+c+"&shopcat_id="+d,n(_,!1,t,{preloadKey:"shop",navbar:{isTransparent:1}})}i&&i(c,e)}}})}function R(e,t,i){e.off("tap").on("tap",function(e){e.stopPropagation(),e.preventDefault();var a=$(this).data("userid");if(a){var o="/shop/user/"+a;i&&i(a),n(o,!1,t)}})}function B(e,t,i){e.on("tap",function(a){a.stopPropagation(),a.preventDefault();var o=$(this).data("shopid"),r="/shop/#shopid="+o+"&navigate=items";isShopeeWeb()&&(r=SeoUtil.getShopUrlSeo(e.data("username")+"#navigate=items")),i&&i(o),t?n(r,!1,t,{preloadKey:"shop",navbar:{isTransparent:1}}):n(r,!0)})}function H(e,t,i){e.on("tap",function(e){e.stopPropagation(),e.preventDefault();var a=$(this).data("userid"),o="/buyer/"+a+"/rating/";i&&i(shopid),n(o,!1,t)})}function M(e,t){if("__node__"!=e&&"__image__"!=e)return t}function D(e){return JSON.stringify(e,M)}function x(e,t,i,a,o,r){e.on("tap",function(a){if(a.preventDefault(),a.stopPropagation(),e=$(this),!r||r(e)){var l=e.data("shopid"),c=e.data("itemid"),s=e.find(".itemName").text(),d=e.data("jump");if(isShopeeWeb())SeoUtil.navigateItemSeo(s,l,c);else{var _="/item/#shopid="+l+"&itemid="+c;if(o&&(_=_+"&data="+encodeURIComponent(D(o))),$(this).hasClass("image")&&d){var p=e.index();_+="&image_index="+p}n(_,!1,t,{preloadKey:"item"})}_+="&source_url="+location.href,i&&i(c,l,e)}})}function L(e,t){e.on("tap",function(i){i.preventDefault(),i.stopPropagation(),e=$(this);var a=e.data("shopid"),o=e.data("itemid"),r=e.find(".itemName").text();if(isShopeeWeb()){var l=!0;SeoUtil.navigateItemSimilarSeo(r,a,o,l)}else{var c="/item/similar/#shopid="+a+"&itemid="+o+"&from_flash_sale=true";t&&(c=c+"&data="+encodeURIComponent(D(t))),n(c,!1,null)}})}function U(e,t,i,a){e.on("tap",function(a){e=$(this);var o=e.data("shopid"),r=e.data("snapshot-id"),l="/item/#shopid="+o+"&itemid="+r+"&snapshot=true",c=e.find(".itemName").text(),s=e.data("jump");if(isShopeeWeb())SeoUtil.navigateItemSeo(c,o,r,!0);else{if($(this).hasClass("image")&&s){var d=e.index();l+="&image_index="+d}n(l,!1,t,{preloadKey:"item"})}i&&i(r,o)})}function G(e){e.on("tap",function(e){e.preventDefault,e.stopPropagation();var t=$(this),i=window.WebViewJavascriptBridge;isVerVideo()?i.callHandler("fullScreenImage",{imageUrls:[ITEM_IMAGE_BASE_URL+t.data("image-id")],medias:[{imageUrl:ITEM_IMAGE_BASE_URL+t.data("image-id"),mediaUrl:ITEM_VIDEO_BASE_URL+t.data("video-id"),
type:1,curTime:0}],currentIndex:0,imageX:0,imageY:0,imageWidth:100,imageHeight:100}):bridgeCallHandler("navigate",{url:location.origin+"/misc/video/#"+t.data("video-id"),presentModal:1,navbar:isIOS()?{}:{isTransparent:1}})})}function F(e,t){e.on("tap",function(i){C(V,{$comment:e,e:i,newwindow:t})})}function V(e,t){m();var i=e.$comment,t=(e.e,e.newwindow),a=i.data("shopid"),o=i.data("itemid"),r=i.data("feedid");bridgeInit(function(){bridge=window.WebViewJavascriptBridge,r?bridge?bridge.callHandler("checkVersion",{},function(e){var i=!1;isAndroid()&&e.appver&&e.appver>=20239?i=!0:e.version&&e.version>=20134&&(i=!0),i?bridge.callHandler("navigateAppPath",{path:"feedComment?feedID="+r+"&shopID="+a},function(){}):n("/timeline/comments/"+r+"?shopid="+a,!1,t)}):n("/timeline/comments/"+r+"?shopid="+a,!1,t):bridgeCallHandler("showItemComments",{shopID:a,itemID:o},function(e){})})}function J(e){var t=e.data("orderid"),i=USERID,a=e.data("shopid");e.on("tap",function(){bridgeInit(function(){n("/order/detail/?orderid="+t+"&shopid="+a+"&userid="+i)})})}function K(e){e.on("tap",function(e){var t=$(this),i=t.data("shopid"),n=t.data("itemid"),a=t.find(".avatar").text(),o=t.find(".itemName").text(),r=t.find(".itemDesc").text(),l=t.find(".itemCurrency").text(),c=t.find(".itemImage").text(),s=t.find(".username").text(),d=t.find(".itemPrice").text(),_=t.find(".shopName").text(),p=t.find(".shopDesc").text(),u=t.find(".shopImage").text(),f=location.origin.replace("mall.","")+"/"+s,h=f+"/"+n+"/";if(n)var g={shopID:i,avatar:a,itemID:n,itemName:o,itemDesc:r,itemCurrency:l,itemPrice:d,itemImage:c,username:s,url:h};else var g={shopID:i,shopName:_,avatar:a,shopDesc:p,shopImage:u,username:s,url:f};bridge=window.WebViewJavascriptBridge,bridge&&bridge.callHandler("share",g,function(e){})})}function W(e){var t=e.popUp,i=t.title||"",n=t.message||"",a=t.cancelText||"",o=t.okText||"",r=$(".shopee-confirm-modal"),l=$(".shopee-confirm"),c=function(t){t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault();var i=$(this).data("button-id");re(e,{buttonClicked:i}),setTimeout(function(){r.addClass("hidden"),l.addClass("hidden")},200)};l.find(".confirm-title .content").text(i),l.find(".confirm-message .content").text("");var s=n.split("\n");_.map(s,function(e){l.find(".confirm-message .content").append($("<p>").text(e))}),l.find(".flex1").off("tap");var d=l.find(".confirm-button.cancel").text(""),p=l.find(".confirm-button.ok").text(""),u=l.find(".flex1").text("");if(a&&o)d.text(a).off("tap").on("tap",c),p.text(o).off("tap").on("tap",c);else{var f=o||a;f&&u.text(f).on("tap",c)}if(r.off("tap").on("tap",c),r.removeClass("hidden"),l.removeClass("hidden"),!i){var h=l.find(".confirm-title");h.height();h.toggle(!1)}$(".shopee-confirm").css({"margin-top":-$(".shopee-confirm").height()/2})}function Y(e){function t(e){s!=a&&($($(".digit-input")[s]).text("*"),r.push(e),s++,o.find(".digit-input").removeClass("active"),$(o.find(".digit-input")[s]).addClass("active"))}function i(){0!=s&&(s--,r.pop(),$($(".digit-input")[s]).html("&nbsp;"),o.find(".digit-input").removeClass("active"),$(o.find(".digit-input")[s]).addClass("active"))}var n=e.popUp,a=(n.title,n.message,n.cancelText,n.okText,n.numberOfDigits),o=$("#pin-popup"),r=[];o.show(),isPC()&&(o.addClass("pc"),o.find(".digit-keyboard").hide(),window.onkeyup=function(e){var n=e.keyCode?e.keyCode:e.which;n>=48&&n<=58&&t(n-48),n>=96&&n<=105&&t(n-96),8==n&&i()});for(var l in n)o.find("."+l).show().text(n[l]);o.find(".digit-holder").empty();for(var c=0;c<a;c++)o.find(".digit-holder").append($('<div class="digit-input">&nbsp;</div>'));var s=0;$(o.find(".digit-input")[s]).addClass("active"),o.find(".digit").off("tap").on("tap",function(e){e.stopPropagation(),t($(this).text())}),o.find(".delete").off("tap").on("tap",function(e){e.stopPropagation(),i()}),o.find(".okText,.cancelText").on("tap",function(t){var i=$(this).data("button-id");o.hide(),re(e,{buttonClicked:i,value:r.join("")})})}function j(e,t){var i=(e.sheetTitle||"",e.items||[]),n=$(".shopee-action-sheet-container");n.empty();for(var a=new BJDjangofy($("#shopee-action-sheet-item").text()),o=0;o<i.length;o++){var r=i[o];n.append(a.render({data:r}))}q(),$(".shopee-action-sheet-mask").off("tap").on("tap",function(e){e.preventDefault(),e.stopPropagation(),z()}),n.find(".action-sheet-item").on("tap",function(){t?t({btnIndexTapped:$(this).index()}):re(e,{btnIndexTapped:$(this).index()}),z()})}function q(){var e=$(".shopee-action-sheet-container");$(".shopee-action-sheet-mask").show(),e.delay(20).velocity({bottom:"0"},{duration:200,easing:"easeInOutQuint",begin:function(){$("body").css("padding-bottom","1px")},complete:function(){$("body").css("padding-bottom","0px")}});var t=window.WebViewJavascriptBridge;t&&t.callHandler("dimNavbar",{isDim:!0,color:"000000",alpha:.65},function(e){})}function z(){var e=$(".shopee-action-sheet-container");$(".shopee-action-sheet-mask").hide(),e.delay(20).velocity({bottom:"-300px"},200,"easeInOutQuint");var t=window.WebViewJavascriptBridge;t&&t.callHandler("dimNavbar",{isDim:!1},function(e){})}function Q(e,t){var i=e.xPosition||"",n=e.yPosition||"",a=e.items||[],o=$(".shopee-drop-down-menu-container");$window=$(window),o.empty();for(var r=new BJDjangofy($("#drop-down-menu-item").text()),l=0;l<a.length;l++){var c=a[l];o.append(r.render({data:c}))}var s=o.height();o.css("opacity",0),o.css("visibility","visible");var d=window.innerHeight?window.innerHeight:$window.height(),_=d*n,p=s+24;_+p+20>d?(o.addClass("shopee-drop-down-menu-container--arrow-down"),o.removeClass("shopee-drop-down-menu-container--arrow-up"),o.css("top",_-p+"px")):(o.removeClass("shopee-drop-down-menu-container--arrow-down"),o.addClass("shopee-drop-down-menu-container--arrow-up"),o.css("top",100*n+"%"));var u=$window.width()*i;isMobile()&&(u+=10),o.css("right",$window.width()-u-6+"px"),X(e),o.find(".drop-down-menu-item").on("tap",function(){t?t({btnIndexTapped:$(this).index()}):re(e,{btnIndexTapped:$(this).index()}),Z()})}function X(e){var t=$(".shopee-drop-down-menu-container"),i=$(".shopee-drop-down-menu-mask").show();i.off("touchmove").on("touchmove",function(e){e.stopPropagation(),e.preventDefault(),Z(),$(".shopee-drop-down-menu-mask").off("touchmove")}),$("body").addClass("noscroll"),$("html").addClass("noscroll");var n=isShopeeApp()?0:200;i.delay(20).velocity({opacity:0},{duration:n}),t.delay(20).velocity({opacity:1},{duration:200,easing:"easeInOutQuint",begin:function(){$("body").css("padding-bottom","1px")},complete:function(){$("body").css("padding-bottom","0px"),$(".shopee-drop-down-menu-mask").off("tap").on("tap",function(e){e.preventDefault(),e.stopPropagation(),Z()})}})}function Z(e){var t=$(".shopee-drop-down-menu-container"),i=$(".shopee-drop-down-menu-mask");$("html").removeClass("noscroll"),$("body").removeClass("noscroll"),i.delay(20).velocity({opacity:0},{duration:200,complete:function(){i.hide()}}),t.delay(20).velocity({opacity:0},{duration:200,easing:"easeInOutQuint",complete:function(){t.css("visibility","hidden")}})}function ee(){window.WebViewJavascriptBridge;bridgeRegisterHandler("search",function(e,t){if(null!=e){var i=e.keyword;if(1==e.type||2==e.type){var n=i.toLowerCase();_track_open_hashtag_list_from_search(n),BJUtil.navigateHashTag(n,!1)}}})}function te(e,t,i,n){var a=window.WebViewJavascriptBridge;$.post("/buyer/follow/shop/"+e+"/",{csrfmiddlewaretoken:t},function(t){a&&a.callHandler("webNotify",{notifyType:"notifyFollowUserUpdate",shopID:e,followed:1}),i&&i()}).fail(function(e){n&&n(parseInt(e.responseText))})}function ie(e,t,i,n){var a=window.WebViewJavascriptBridge;$.post("/buyer/unfollow/shop/"+e+"/",{csrfmiddlewaretoken:t},function(t){a&&a.callHandler("webNotify",{notifyType:"notifyFollowUserUpdate",shopID:e,followed:0}),i&&i()}).fail(function(e){n&&n(parseInt(e.responseText))})}function ne(e){if(e){var t=window.WebViewJavascriptBridge;t.callHandler("checkVersion",{},function(t){var i=t.version;e(!!(isIOS()&&i>2e4||isAndroid()&&i>=28))})}}function ae(e){var t=e.key,i=e.data,n=e.persist;if(t&&i)try{window.sessionStorage.setItem(t,i),n&&window.localStorage.setItem(t,i),re(e,{status:1})}catch(a){console.error(a),console.warn("Localstorage is not accessible, maybe the user is using private mode on Safari")}re(e,{status:0})}function oe(e){var t,i=e.key;if(i)try{t=window.sessionStorage.getItem(i),t||(t=window.localStorage.getItem(i))}catch(n){console.error(n),console.warning("Localstorage is not accessible, maybe the user is using private mode on Safari")}re(e,{data:t})}function re(e,t,i){i=i||window.BJBridgeReceiver,i&&i.callCallback(e,t)}function le(e,t,i,n){var a=i||null;return e&&n(e,t)&&(a=e[t]),a}function ce(e,t,i){return le(e,t,i,function(e,t){return e&&t in e})}function se(e,t,i){var n=e||{};return n[t]=i,n}function de(e,t,i){return le(e,t,i,function(e,t){return e&&e.hasOwnProperty(t)})}function _e(e){if(_.isFunction(e))return e.apply(e,Array.prototype.slice.call(arguments,1))}function pe(e,t){var i="";switch(e){case Constants.ProtobufCmdErrcode.LIMIT:i="alert_{{operation}}_limit";break;case Constants.ProtobufCmdErrcode.FREQUENT:i="alert_{{operation}}_too_frequent";break;default:e!==Constants.ProtobufCmdErrcode.OK&&(i="msg_server_error")}return i&&alert_message(i18n.t(i.kFormat({operation:t}))),e==Constants.ProtobufCmdErrcode.OK}function ue(e,t){BJUtil.isSimpleVersion()?t():e()}function fe(e,t){e.off("tap").on("tap",function(i){i.stopPropagation(),e.hasClass("ic_checkbox_outline")&&!t()||(e=$(this),e.toggleClass("ic_checkbox_outline").toggleClass("ic_checkbox_checked"))})}function he(e){return!isNaN(e)&&e===parseInt(e,10)}function ge(e,t){function i(){var e=null;t&&(e=$(t),e.width()>150?e.addClass("adultcntrl-products age-"+ADULT_AGE):e.addClass("adultcntrl age-"+ADULT_AGE)),bridgeCallHandler("showPopUp",{popUp:{message:i18n.t("label_age_control_msgs_customize").replace("__{age}__",ADULT_AGE),okText:i18n.t("label_age_control_ok_customize").replace("__{age}__",ADULT_AGE),cancelText:i18n.t("label_age_control_no_customize").replace("__{age}__",ADULT_AGE)}},function(t){0==t.buttonClicked?ve(e):bridgeCallHandler("popWebView")})}e&&(me()||i())}function me(){if(!$||!$.cookie)return!1;var e=$.cookie(ut);return"1"==e}function ve(e){$.cookie(ut,1,{expires:7300,path:"/"}),$(document).trigger(St),e&&($(e).removeClass("adultcntrl"),$(e).removeClass("adultcntrl-products"),e.hasClass("itemsimple")&&e.find(".item-card").removeClass("adultcntrl"))}function Ie(e){var t=e.data("is_adult");t&&(me()||(e.find(".image-wrapper").addClass("adultcntrl age-"+ADULT_AGE),e.hasClass("itemsimple")&&e.find(".item-card").addClass("adultcntrl age-"+ADULT_AGE)))}function Se(){isIOS()?window.triggerIOSAppPageReInit&&triggerIOSAppPageReInit():isAndroid()&&window.MeTabView&&window.MeTabView.resize&&MeTabView.resize(document.body.offsetHeight)}function Ce(e,t){e.find(t).on("tap",function(e){e.preventDefault(),e.stopPropagation();var t=$(e.currentTarget).data("video-id"),i="https://youtu.be/"+t;if(t)if(isShopeeWeb())bridgeCallHandler("navigate",{url:i,presentModal:!1,target:"_blank"},function(){});else{var n="openYoutubeVideo";bridgeCallHandler("hasHandler",{handler:n},function(e){if(1==e.status)bridgeCallHandler(n,{videoID:t},function(e){!e.status});else{var a=location.origin+"/bridge_cmd/?cmd=inPageNavigate&url="+encodeURIComponent(i);bridgeCallHandler("openExternalLink",{url:a},function(e){!e.status})}})}})}function Ae(e,t){return function(){var i=scrollTopFunc(),n=$(window).height(),a=$(document).height();a-i-n<e&&t&&"function"==typeof t&&t()}}function Te(e){var t=$(".location-bar");if(isPC()){var i=$("#category-items").width(),n=($(window).width()-i)/2+"px";t.css({width:i,"margin-left":n,"margin-right":n})}window.lat&&window.lon?(Ee(e),$(window).on("scroll",function(){Ee(e)})):(t.text(i18n.t("text_waiting_for_location")),t.show(),window.WebViewJavascriptBridge?(alert_message_with_loader(i18n.t("text_retrieve_location")),window.WebViewJavascriptBridge.callHandler("getLocation",{},function(e){hide_message_with_loader(),1==e.status?location=$.query.set("lat",e.latitude).set("lon",e.longitude):Oe()})):($(".location_waitings").removeClass("hidden"),navigator.geolocation.getCurrentPosition(function(e){lat=e.coords.latitude,lon=e.coords.longitude,BJUtil.navigate($.query.set("lat",lat).set("lon",lon)+location.hash,!0)},function(){Oe()})))}function we(){$(".location-bar").hide(),$(".location-bar").addClass("hidden"),$(window).off("scroll",Ee)}function Oe(){$(".item-list,.loading-text").addClass("hidden"),$(".nomore").addClass("hidden"),hide_message_with_loader(),$(".category_item").hide(),$(".empty_holder").addClass("hidden"),$(".empty_holder.location").removeClass("hidden"),$(".loading-text").hide(),we()}function Ee(e){var t=e.itemsOnScreen(!1);if(!t||0==t.length)return void setTimeout(function(){Ee(e)},200);var i=scrollTopFunc(),n=curTs();if(!(0!=i&&n-ft<500)){ft=n;var a=$(".location-bar");a.fadeIn(200);var o=t[t.length-1].distance,r="";o<1e3?r=o<50?i18n.t("label_within")+" 50"+i18n.t("label_m"):o<100?i18n.t("label_within")+" 100"+i18n.t("label_m"):o<200?i18n.t("label_within")+" 200"+i18n.t("label_m"):o<500?i18n.t("label_within")+" 500"+i18n.t("label_m"):i18n.t("label_within")+" 1"+i18n.t("label_km"):(o=Math.floor(o/1e3),r=o<10?i18n.t("label_within")+" "+o+i18n.t("label_km"):o<20?i18n.t("label_within")+" 20"+i18n.t("label_km"):o<30?i18n.t("label_within")+" 30"+i18n.t("label_km"):o<50?i18n.t("label_within")+" 50"+i18n.t("label_km"):o<100?i18n.t("label_within")+" 100"+i18n.t("label_km"):i18n.t("label_more_than_200km_away")),a.text(r)}}function ke(e,t,i,n){var a="";e.forEach(function(e,t){var i="option"+t+"="+encodeURIComponent(e);a=0==t?a:a+"&",a+=i}),!isNaN(i)&&i>=0&&(a+="&selected="+i),localStorage.setItem("custom_select_text",a);var o="/func/app_select/#navigate="+encodeURIComponent(JSON.stringify(n));isShopeeApp()?bridgeCallHandler("navigate",{url:location.origin+o,navbar:{title:t},config:{disableReload:!0}},function(e){}):BJUtil.navigateModally(location.origin+o,"custom_select")}function be(e){function t(){ye(i18n.t("text_retrieve_location_failed"))}ye(i18n.t("text_waiting_for_location"));scrollTopFunc();window.WebViewJavascriptBridge?(alert_message_with_loader(i18n.t("text_retrieve_location")),window.WebViewJavascriptBridge.callHandler("getLocation",{},function(i){hide_message_with_loader(),1==i.status?e(i.latitude,i.longitude):t()})):navigator.geolocation.getCurrentPosition(function(t){e(t.coords.latitude,t.coords.longitude)},function(){t()})}function ye(e){$(".location-bar").text(e)}function Ne(e){var t=e.mainCategoryId||null,i=e.subCategoryId||null,a=e.isAdult||null,o=e.keyword||null,r=e.mainCategoryName||"",l=!!e.inPageReload,c=!!e.nextPageInPageReload,s=e.pageType||"search",d=e.shopid||null,_=e.shopCategoryIds||null,p={},u=e.shopCategoryName||null,f=e.shopName||null,h=e.searchThisThenGoBack||null,g=e.matchid||null,m=e.subCategoryName||null,v=e.filterObj||null,I=e.hashtag||null,S=e.source||null,C=e.suggestedWords||[],A=e.originalCategoryId||null,T=e.isOfficialShop||null;o&&(p.search=encodeURIComponent(o)),i&&(p.sub_categoryid=i),a&&(p.is_adult=a),r&&(p.categoryname=r),t&&t!=-1&&(p.categoryid=t),m&&(p.sub_cate_name=m),"shop"==s?p.is_shop=1:"hashtag"==s?p.is_hashtag=1:"attribute"==s&&(p.is_attribute=1),d&&(p.shopid=d),_&&(p.shop_categoryids=_),f&&(p.shop_name=f),u&&(p.shop_cate_name=u),c&&(p.in_page_reload=!0),h&&(p.search_back=h),g&&(p.match_id=g),v&&(p.filter_obj=v),I&&(p.hashtag=I),S&&(p.source=S),C&&(p.suggested_words=JSON.stringify(C)),A&&(p.original_categoryid=A),T&&(p.is_official_shop=!0);var w=null,O=null;if("collection"==s?(w=location.origin+"/collections/"+g+"/?"+$.param(p),O=null):(w=location.origin+"/search-item/?"+$.param(p),O="search"),window.BI_ANALYTICS){var E={action:"search",data:JSON.stringify(p)};BI_ANALYTICS.trackingActionEventV2({info:E},BI_ANALYTICS.getV2TrackingEventBaseData(TRACKING_V2_EVENT_TYPE.ACTION))}n(w,l,!1,{preloadKey:O})}function Pe(e){bridgeCallHandler("showPopUp",{popUp:{message:e,okText:i18n.t("label_ok")}},function(){bridgeCallHandler("popWebView",{},null)})}function Re(e){bridgeCallHandler("showPopUp",{popUp:{message:e,okText:i18n.t("label_ok")}})}function Be(e){function t(){var e=document.createElement("a");return e.href=document.referrer,e.pathname}function i(){var e=[location.host,location.host.replace("mall.","seller."),location.host.replace("mall.","")];return document.referrer.indexOf(e[0])==-1&&document.referrer.indexOf(e[1])==-1&&document.referrer.indexOf(e[2])==-1||1==window.history.length}function n(){var e=t(),n=["/buyer/payment/cybs/commit/"],a=[/\/buyer\/payment\/\d+\/ipay\//g],o=[/\/me\//g];return i()||n.indexOf(e)>=0||a.some(function(t){return t.test(e)})||o.some(function(e){return e.test(location.href)})}function a(){var e=t(),i=["/buyer/payment/ipay/commit/"];return i.indexOf(e)>=0}1==history.length&&null!=window.opener&&window.opener!=window?window.close():n()?BJUtil.navigate("/"):a()?BJUtil.navigate("/me/"):parent.BJUtil.isInModal()&&!e?bridgeCallHandler("popWebView",{},null):(window.history.back(),setTimeout(function(){null!=window.opener&&window.opener!=window&&window.close()},300))}function He(e,t,i,n,a){function o(){It={},It.templateItem=n?$("#simple-item-card").text():$("#item-card-display").text(),It.templateItemSeeMore=n?$("#simple-item-card").text():$("#item-card-display-see-more").text(),It.templateBadgePromotion=$("#badge-promotion").text(),It.templateBadgeNew=$("#badge-new").text(),It.templateBadgeSoldout=$("#badge-soldout").text()}function r(e,t){var i=t?"seeMore":"normal";if(!vt[i]){var n=t?It.templateItemSeeMore:It.templateItem;vt[i]=new BJDjangofy(n,{template_subs:{"shop/badges/badge_new.html":It.templateBadgeNew,"shop/badges/badge_promotion.html":revertTWDiscountForEnglishIfNeededTemplate(It.templateBadgePromotion),"shop/badges/badge_soldout.html":It.templateBadgeSoldout}})}return revertTWDiscountForEnglishIfNeeded(e),$(vt[i].render({ITEM_IMAGE_BASE_URL:ITEM_IMAGE_BASE_URL,item:e,LOCALE:window.LOCALE,LANGUAGE:window.LANGUAGE}))}function l(e){for(var t=Number(e.rating_star).toFixed(1),i=0;i<5;i++){var n=t-i;n>=1?e["star_cls_"+i]="ic_rating_score_solid":n>=.5?e["star_cls_"+i]="ic_rating_score_half":e["star_cls_"+i]="ic_rating_score_hollow"}return e.rating_count&&e.rating_count.length>0&&e.rating_count[0]?(e.rating_count_display="("+e.rating_count[0]+")",e.rating_inline_style=""):e.rating_inline_style="visibility:hidden",e}It||o();var c=$(".center-container").width(),s=Math.round(.28*c);n||(e=l(e));var d=r(e,t);return d.css("width",s),i||t||(x(d,null,a,null,e),Ie(d),n||d.find(".item_rating").off("tap").on("tap",function(e){e.preventDefault(),e.stopPropagation();var t="/shop/{0}/item/{1}/rating/".f(d.data("shopid"),d.data("itemid"));BJUtil.navigate(t)})),d}function Me(){bridgeCallHandler("showPopUp",{popUp:{message:i18n.t("msg_seller_has_blocked_you"),cancelText:i18n.t("label_cancel"),okText:i18n.t("label_see_other_products")}},function(e){if(0==e.buttonClicked)if(isMobile()){var t={},i=window.APPVER||window.VERSION;isIOS()&&i>=20809||isAndroid()&&i>=20803?t.lastPageTrigger=JSON.stringify({action:"addHash",hash:"just-for-you"}):t.currentPageUrl=location.origin+"/#just-for-you";var n=JSON.stringify(t),a=encodeURIComponent(Base64.encode(n)),o="home?navRoute="+a;bridgeCallHandler("jump",{path:o},function(){})}else location.href="/#just-for-you"})}function De(e){BJUtil.navigate("//"+location.hostname.replace("mall.","")+e,!0)}function xe(e){var t={TW:100,ID:1e4,TH:100,MY:10,VN:1e4,PH:50,SG:10},i=e/PRICE_INFLATION_FACTOR,n=t[LOCALE];return i=Math.round(i/n)*n}function Le(e){var e=CryptoJS.SHA256(CryptoJS.MD5(e).toString()).toString();return e}function Ue(){bridgeCallHandler("dimNavbar",{isDim:!0,color:"000000",alpha:.54},function(e){})}function Ge(e,t,i){function n(){r.hide().css("z-index",""),bridgeCallHandler("dimNavbar",{isDim:!1},function(e){})}function a(){return"toggleGeneralMaskTapBackHandler"}var o=window.WebViewJavascriptBridge,r=$(".general-mask");e?(t&&r.css("z-index",t),r.show(),isShopeeApp()&&(isIOS()?document.hidden||Ue():Ue(),bridgeRegisterHandler("viewWillReappear",function(e,t){$(".general-mask").is(":visible")&&Ue()})),r.off().on("tap",function(e){e.preventDefault(),e.stopImmediatePropagation(),Ge(!1,t,i)}).on("touchmove",function(e){e.stopPropagation(),e.preventDefault()}),i&&bridgeRegisterHandler("didTapBack",function(){Ge(!1,t,i)},a())):(n(),i&&o&&o.unregisterHandler("didTapBack",a()))}function $e(e,t,i){$.post("/addresses/geo_info/",{csrfmiddlewaretoken:csrf,address_id:e,geoinfo:t}).always(function(){i&&i()})}function Fe(e,t,i){for(var n={},a=0;a<e.length;a++)n[e[a]]={enabled:!1};$.post("/seller/logistics/shipping/shop/update/",{settings:JSON.stringify(n),csrfmiddlewaretoken:csrf},t).fail(i)}function Ve(e,t,i,n){var a="&match="+encodeURIComponent(JSON.stringify(["admin3","admin2","admin1","country"])),o="&address="+e,r=n?"&viewOnly=true":"";return t&&i&&(o="&latitude="+t+"&longitude="+i),isShopeeApp()?void bridgeCallHandler("checkVersion",{},function(e){var t=!1;isAndroid()&&e.appver&&e.appver>=21e3?t=!0:e.version&&e.version>=21e3&&(t=!0),t?isAndroid()?bridgeCallHandler("isMapAvailable",{},function(e){1==e.status?bridgeCallHandler("navigateAppPath",{path:"reactNative?bundle=shopee&module=MAP_PAGE"+a+o+r},function(){}):We(i18n.t("msg_download_shopee_google"),i18n.t("label_ok"))}):bridgeCallHandler("navigateAppPath",{path:"reactNative?bundle=shopee&module=MAP_PAGE"+a+o+r},function(){}):We(i18n.t("msg_pls_update_apps"),i18n.t("label_ok"))}):void We(i18n.t("msg_app_go_send"),i18n.t("label_ok"))}function Je(e){return e<2?e:Math.floor((e-2)/5+1)}function Ke(e){return ShopeeLib.Adc.getReferals(e)}function We(e,t,i,n){var a={buttonType:1};a.message=e||"",a.okText=t||i18n.t("label_ok"),a.cancelText=i||i18n.t("label_cancel"),bridgeCallHandler("showPopUp",{popUp:a},function(e){n&&n(e)})}function Ye(e,t,i,n,a,o,r){var l={message:e,okText:i||i18n.t("label_ok")};(t||o)&&(l.cancelText=n||i18n.t("label_learn_more")),r&&(l.title=r),bridgeCallHandler("showPopUp",{popUp:l},function(e){if(1==e.buttonClicked&&(t||o)){var i=t?getFAQAnswerUrl(t):o;BJUtil.navigate(i,!1,!0)}a&&a(e)})}function je(e){return!(!window.ADS_TOPUP_SHOPIDS||window.ADS_TOPUP_SHOPIDS.indexOf(parseInt(e))==-1)}function qe(e,t){e||(e=$(window).scrollTop()),t||(t=0);var i=$(document);window._pageScrollTop=e,$("body").css("top",-window._pageScrollTop+"px").css("height",i.height()).css("width",i.width()).css("left",t).addClass("disable-scroll")}function ze(){$("body").removeClass("disable-scroll"),$(window).scrollTop(window._pageScrollTop)}function Qe(e){bridgeCallHandler("showPopUp",{popUp:{message:i18n.t("msg_you_will_receive_a_phone_call"),okText:i18n.t("label_call_me"),cancelText:i18n.t("label_cancel")}},function(t){0==t.buttonClicked&&e()})}function Xe(e){var t;return t=window.MALL_HOST_ROOT_URL?window.MALL_HOST_ROOT_URL+"/static/images/":location.protocol+"//"+location.host+"/static/images/",3==window.devicePixelRatio||2.99==window.devicePixelRatio?t+e+"_3x.png":2==window.devicePixelRatio?t+e+"_2x.png":t+e+".png"}function Ze(e){var t=e.split(".png")[0],i="";return window.devicePixelRatio>=1.5&&window.devicePixelRatio<2?i="@1.5x":window.devicePixelRatio>=2&&window.devicePixelRatio<3?i="@2x":window.devicePixelRatio>=3&&window.devicePixelRatio<4?i="@3x":window.devicePixelRatio>=4&&(i="@4x"),t+i+".png"}function et(e,t){var i={bundle:"shopee",refer_url:location.href.split(/#|\?/)[0]},n="reactNative";bridgeCallHandler("navigateAppPath",{path:generateGetUri(n,_.extend(i,e)),popSelf:t||!1})}function tt(e){if("1"===$.cookie("FORCE_DISABLE_RN"))return!1;var t=getAppVersion(),i=isAndroid()?window.RN_PAGE_MIN_VERSION_ANDROID:window.RN_PAGE_MIN_VERSION_IOS,n=t>=(i[e]||i["default"]),a=window.RN_PERCENTAGE[e];if(!isIOS7()&&n){if(a==-1)return!1;var o="1"===$.cookie("ENABLE_RN");return!!o||(USERID?USERID%100<a:100==a)}return!1}function it(e,t){return t?generateGetUri(e,{filter:t}):e}function nt(e,t,i){function n(e,n,a){getJSON(e,function(e){n&&e.version==n.version||(t(e),bridgeCallHandler("save",{key:a,data:JSON.stringify(e),persist:0})),o.resolve()},null,1e4).fail(function(e){i&&i(e),o.resolve()})}var a=e,o=$.Deferred();return bridgeCallHandler("load",{key:a},function(i){if(null!=i.data){var r=JSON.parse(i.data);t(r),n(e,r,a),o.resolve()}else n(e,null,a)}),o}function at(e,t,i){var n={};t=t||[];var a=_.map(t,function(e){return e.catid}).indexOf(e);a==-1&&(a=Constants.OFFICAL_SHOP_POPULAR_CATID),n.navbar=getOfficialShopNavBar(),t.length>1&&(n.tabs=t,n.tabsConfig={textColor:"#212121",activeColor:"#D0011B",barColor:"#FFFFFF",textSize:14,textSizeActive:16,tabIndex:a||0},n.pageType=SEARCH_ENUM.PAGE_TYPE_ENUM.OFFICAL_SHOP_LANDING);var o={catid:e||Constants.OFFICAL_SHOP_POPULAR_CATID};if(t&&t.length){if(o.tabs_count=t.length,null!=i){o.init_position=i;var r=t[0].url,l=parse_hash_general(r)||{},c=r.split("#")[0];l.init_position=i,t[0].url=generateHashUri(c,l)}BJUtil.navigate("",null,null,n)}else{var s=window.CONFIG_OFFICIAL_SHOP_ROOT_URL,l=parse_hash_general(s)||{},c=s.split("#")[0];l.init_position=i;var d=generateHashUri(generateGetUri(c,o),l);BJUtil.navigate(d,null,null,n)}}function ot(e,t){if(!isShopeeApp())return void at(e,null,t);if(window.officialShopTabs&&window.officialShopTabs.length>0)return void at(e,window.officialShopTabs,t);alert_message_with_loader(),window.officialShopTabs=[];var i=st(window.officialShopTabs);i.done(function(){at(e,window.officialShopTabs,t)}).fail(function(){alert_message(i18n.t("label_unexpected_error"))}).always(function(){hide_message_with_loader()})}function rt(e,t,i){if(isShopeeApp()){if(window.brandListTabs&&0!=window.brandListTabs.length)lt(e,t,window.brandListTabs);else if(window.asyncGetBrandListTabs){alert_message_with_loader(),window.brandListTabs=[];var n=asyncGetBrandListTabs(window.brandListTabs);n.done(function(){lt(e,t,window.brandListTabs)}).fail(function(){alert_message(i18n.t("label_unexpected_error"))}).always(function(){hide_message_with_loader()})}}else lt(e,t,null)}function lt(e,t,i){var n={};i=i||[];var a=_.map(i,function(e){return e.catid}).indexOf(e);a<0&&(a=0),n.navbar=getOfficialShopNavBar(),delete n.navbar.rightItemsConfig,i.length>1&&(n.tabs=i,n.tabsConfig={textColor:"#212121",activeColor:"#D0011B",barColor:"#FFFFFF",textSize:14,textSizeActive:16,tabIndex:a||0},n.pageType=SEARCH_ENUM.PAGE_TYPE_ENUM.OFFICAL_SHOP_LANDING);var o={catid:e||Constants.OFFICAL_SHOP_POPULAR_CATID,catname:t};if(i&&i.length)o.tabs_count=i.length,BJUtil.navigate("",null,null,n);else{var r=generateGetUri(location.origin+"/brand_list/",o);BJUtil.navigate(r,null,null,n)}}function ct(e){return e=e.replace("mall.",""),e.indexOf(window.CONFIG_OFFICIAL_SHOP_ROOT_URL)!=-1||e.indexOf("Official-Shops")!=-1}function st(e){return getJSON("/api/v2/content/official_shop_landing_tabs",function(t){if(t&&t.data&&t.data.items)for(var i=t.data.items,n=0;n<i.length;n++){var a=i[n],o={},r={catid:a.catid};o.name=a.display_name,o.url=generateGetUri(location.origin+window.CONFIG_OFFICIAL_SHOP_ROOT_URL+"/",r),o.catid=a.catid,e.push(o)}})}function dt(){var e=window.APPVER||window.VERSION;(isIOS()&&e<21300||isAndroid()&&e<21300)&&bridgeCallHandler("showPopUp",{popUp:{message:i18n.t("msg_cancel_order_upgrade"),okText:i18n.t("label_ok")}},function(e){bridgeCallHandler("popWebView")})}var _t=null,pt=[],ut="SPC_IA",ft=0,ht=function(e,t){$(e).on("tap",function(e){var i=$(this);e.preventDefault(),e.stopPropagation();var n=i.data("catid"),a=i.data("catname"),o=i.data("nosub");t&&t(i),handleNavigateCategory(n,a,o,window.bridge)})},gt=function(e,t,i,n,a){var o=location.origin+"/search-item/?search="+encodeURIComponent(e);t&&""!=t&&(o=o+"&catid="+encodeURIComponent(t)),i&&""!=i&&(o=o+"&catname="+encodeURIComponent(i)),n&&""!=n&&(o=o+"&by="+encodeURIComponent(n));var r=getSubCateNavBar(t,i);r.searchText=e,bridgeCallHandler("navigate",{url:o,preloadKey:"search",tab:getCategoryNativeTabs(o),tabRightButton:{type:"button",key:"filter",iconType:"filter",iconText:i18n.t("label_filter")},navbar:r},function(){})},mt=function(e,t){$(e).on("tap",function(e){var i=$(this);e.stopPropagation();var n=i.data("keyword"),a=i.data("catid"),o=i.data("catname"),r=i.data("by");t&&t(i),gt(n,a,o,r,window.bridge)})},vt={},It=null,St="EVENT_DISMISS_ADULT";return{configurePageTitle:i,navigate:n,checkAdult:ge,navigateModally:a,navigateHashTag:E,navigateCollection:b,getCollectionNavBar:y,viewWillReappear:s,viewWillReappearHandler:c,pop:o,ajax:d,post:f,get:h,sentryLog:u,listenLike:g,popUserPrivacy:m,listenFollow:I,findHash:A,listenAnchor:N,listenHash:T,listenShop:P,listenUser:R,listenShopItems:B,listenRates:H,listenSnapshotItem:U,listenItem:x,listenItemSimilar:L,listenComment:F,listenShare:K,listenVideo:Ce,listenCategoryLink:ht,listenProductVideo:G,showWebPopUp:W,showWebPinPopUp:Y,isV2:ne,handleSearchHashtag:ee,handleFollow:te,handleUnfollow:ie,save:ae,load:oe,setupLoadMore:Ae,isInModal:function(){return!!_t},idx:ce,ownIdx:de,set:se,callFunction:_e,checkLogin:C,handleProtobufError:pe,isSimpleVersion:t,globalVersionFallback:ue,listenTicker:fe,isAdultSafe:me,listenAge:Ie,listenLastlogin:w,showActionSheet:j,showDropdownMenu:Q,isInteger:he,getShareIcon:O,enterLocationMode:Te,hideLocationBar:we,init:e,obtainLocation:be,onLocationScroll:Ee,EVENT_DISMISS_ADULT:St,customSelectThenNavigate:ke,listenSearch:mt,listenOrder:J,jumpToSearch:Ne,reInitPage:Se,showMsgAndGoBack:Pe,showMsg:Re,goBackOrClose:Be,showSellerBlockedUserPopup:Me,encryptPassword:Le,toggleGeneralMask:Ge,renderItemDisplayCard:He,redirectToPC:De,getPriceForDisplay:xe,calculateLocationInAds:Je,updateGeoInfo:$e,getTrackingReferUrls:Ke,showPopupWithLearnMore:Ye,showPopup:We,is_ads_topup_shopid:je,disablePageScroll:qe,enablePageScroll:ze,getIconUrl:Xe,navigateReactNaive:et,navigateReactNative:et,showVoiceOTPPopUp:Qe,navigateToMap:Ve,disableLogisticsChannel:Fe,isRNEnabled:tt,addFromTabFilterToUrl:it,getIconNameWithRatio:Ze,jumpToOfficialShopLanding:ot,getJSONPlus:nt,jumpToBrandlist:rt,isOfficialShopLandingPageUrl:ct,asyncGetOfficialShopTabs:st,needUpgradeAppForCancellation:dt}}(),PAYMENT_CHANNEL_LIST_CONST={SELECTED_CHANNEL_ID:"selectedChannelId",SELECTED_CHANNEL_CATEGORY:"selectedChannelCategory",SELECTED_CHANNEL_COMPONENT:"selectedChannelComponent",LAST_TAPPED_CHANNEL_ID:"lastTappedChannelId",IS_DURING_CHECKOUT:"isDuringCheckout",CHECKOUT_ID:"checkoutId",SAVE_KEY:"saveKey"},Constants={OfflineDisabledReasons:{1:i18n.t("msg_offline_payment_disabled_singular"),2:i18n.t("msg_promo_code_no_offline_payment"),3:i18n.t("msg_promo_offline_no_multiple_checkouts"),4:i18n.t("msg_cod_not_all_supported_logistic"),5:i18n.t("msg_order_total_exceed_cod_maximum"),6:i18n.t("msg_payment_channel_banned_category"),7:i18n.t("msg_total_price_exceed_channel_max"),8:i18n.t("msg_total_price_exceed_credit_card_max"),9:i18n.t("msg_total_price_below_min_amount"),10:i18n.t("msg_buyer_address_not_support_cod"),11:i18n.t("msg_payment_option_maintenance"),12:i18n.t("msg_cod_temporarily_suspended"),13:i18n.t("msg_overseas_products_credit_card_only")},PaymentChannelCategory:{NONE:0,CYBERSOURCE:1,BANK_TRANSFER:2,OFFLINE_PAYMENT:3,IPAY:4,FREE:5,COD:6,ESUN:7,BILL_PAYMENT:8,SHOPEE_WALLET:20},BankTransferMethodKey:{NORMAL:"normal",ATM:"atm_payment",ATM_MOBILE:"mobile_atm_payment",ATM_INTERNET:"internet_atm_payment",I_BANKING:"i_banking_payment"},CheckAddressShippingChannels:[30001],AddressShippingFeeChannels:[30001],LogisticChannelCategory:{NON_INTEGRATED:0,KERRY:1,HEIMAO:2,SHOPEE_VN:3,JNE:4,RPX:5,NINJAVAN:6,SEVEN:7,FAMILYMART:8,AFTERSHIP:0,GDEX:10,LBC:12,THAI_POST:13,VN_GHN:14,VN_VIETTEL_POST:15,THAI_POST_P2:16},LogisticAddressType:{TW_711_BUYER:1,TW_FAMILYMART_BUYER:2,TW_HILIFE_BUYER:5},LogisticAddressRegion:{NONE:0,MY_EAST:1,MY_WEST:2},LogisticChannelOptionFlag:{HIGH_VALUE_PRODUCT:1,FAST_SHIPPING:2},LogisticDiscountFlag:{PERCENTAGE:0,FLAT_RATE:1,FIXED_DEDUCTION:2,SHIPPING_PROOF_CHECK:4096,TRACKING_NUMBER_CHECK:8192,BUYER_LOCATION_CHECK:1<<20,ORDER_TOTAL_CHECK:1<<21,REBATE_SHIPPING_FEE:1<<28,REBATE_SHIPPING_FIXED_FEE:1<<29},LogisticPromotionRuleDiscountFlag:{
PERCENTAGE:1,FLAT_RATE:2,CAPPED:4,PERCENTAGE_WITH_CAP:8},LoadMoreThresholds:{PREVIOUS_COMMENTS:20},ProtobufCmdErrcode:{OK:0,UNKNOWN:-1,PARAM:1,PERM:2,LIMIT:3,NOTFOUND:4,EXIST:5,OUTSTOCK:6,EXPIRE:7,INVITATION:8,BANNED:9,DUPCMD:10,DUPLICATE:11,COUNTRY_RESTRICT:12,DELETED:13,PROMOTION:14,FREQUENT:15,SHADOW_ACC:16,PRICE_LIMIT:17,PRICERULE:18,NOT_LOGIN:19,FRAUD:20},CssClass:{GLOBAL_VERSION_CLASS:"global-version"},ShippingChannelID:{VN_OFFLINE:59999},BridgePopUpButton:{OK:0,CANCEL:1},DiscountType:{RATIO:"ratio",FIXED:"fixed",FLAT:"flat"},CapitalCityOf:{TW:{state:"台北市",city:"中正區"},PH:{state:"Metro Manila",city:"Metro Manila"},VN:{state:"Hà Nội",city:"Huyện Ba Vì"},ID:{state:"DKI JAKARTA",city:"KOTA JAKARTA PUSAT",district:"MENTENG"},TH:{state:"จังหวัดกรุงเทพมหานคร",city:"เขตพระนคร"},MY:{state:"Selangor",city:"Kuala Lumpur"}},ListSeparator:{SG:" / ",MY:" / ",ID:" / ",TW:"、",VN:", ",PH:", ",en:", ",vi:", ",zhHant:"、"},SentenceSeparator:{VN:", ",ID:", ",TW:"，",PH:", ",en:", ",vi:", ",zhHant:"，"},DiscountDisplayType:{SHOW_DISCOUNTED_AMOUNT:1,SHOW_DISCOUNT_DELTA:2},EmailNotAllowedWhenRequestSubmission:["support@shopeemobilesg.zendesk.com","support@shopee.sg","dispute@shopee.sg","dpo@shopeemobile.com","support@shopeemobilemy.zendesk.com","support@shopee.com.my","dispute@shopee.com.my","support@shopeemobilevn.zendesk.com","support@shopee.vn","dispute@shopee.vn","order@shopee.vn","support@shopeemobileph.zendesk.com","support@shopee.ph","dispute@shopee.ph","support@shopeemobileth.zendesk.com","support@shopee.co.th","dispute@shopee.co.th","support@shopeemobileid.zendesk.com","support@shopee.co.id","dispute@shopee.co.id","seller-info@shopee.co.id","subsidiongkir@shopee.co.id","support@shopeemobiletw.zendesk.com","support@shopee.tw","dispute@shopee.tw"],MatchTypeIndex:{MATCH_SHOP:1,MATCH_CATEGORY:2,MATCH_COLLECTION:3,MATCH_HASHTAG:4,MATCH_SHOP_CATE:5,MATCH_KEYWORD:6,MATCH_ITEM:7,MATCH_ATTRIBUTE:8,MATCH_SKU:9,MATCH_ADDRESS:10},OFFICAL_SHOP_POPULAR_CATID:-2,OFFICAL_SHOP_ALL_CATID:-1,FLASH_SALE_DEFAULT_URL:{SG:"/flash_deals/",PH:"/flash_deals/",ID:"/flash_sales/",TW:"/flash_sales/",VN:"/flash_sales/",MY:"/shocking_sale/",TH:"/flash_sales/"},PAID_ADS_LANDING_PAGE:{TW:"http://myads.shopee.tw/",ID:"http://iklanku.shopee.co.id",VN:"http://muatukhoa.shopee.vn",TH:"http://myads.shopee.co.th"}},SEARCH_ENUM={PAGE_TYPE_ENUM:{CATEGORY_ITEMS:0,SEARCH_ITEMS:1,HASHTAG:2,HASHTAG_SEARCH:3,SHOP_ITEMS:4,SHOP_ITEMS_SEARCH:5,COLLECTION:6,COLLECTION_SEARCH:7,ATTRIBUTE:8,DAILY_DISCOVER:100,HOME_DAILY_DISCOVER:101,SHOP_LIKES_TAB:102,YOU_MAY_ALSO_LIKE:103,YOU_MAY_ALSO_LIKE_IN_ITEM:104,POPULAR_PRODUCTS:105,HOME_POPULAR_PRODUCTS:106,SIMILAR_PRODUCTS:107,SIMILAR_PRODUCTS_IN_ITEM:108,OFFICAL_SHOP_LANDING:109,OFFICAL_SHOP_LANDING_RECOMMEND_PRODUCTS_SEE_MORE:110,HOMEPAGE:111,"MAIN_CATEGORY ":112,FLASHSALE_HOME:113,FLASHSALE_LANDING:114,OFFICIAL_SHOP_PAGE_SEARCH:115,HOME_OFFICIAL_SHOP:116,TRENDING_SHOPS_LANDING:117},SORT_TYPES:{SORTBY_POPULAR_DESC:1,SORTBY_LATEST_DESC:2,SORTBY_DISTANCE_DESC:3,SORTBY_PRICE_DESC:4,SORTBY_POPULAR_ASC:5,SORTBY_LATEST_ASC:6,SORTBY_DISTANCE_ASC:7,SORTBY_PRICE_ASC:8,SORTBY_RELEVANCE:9,SORTBY_DISCOUNT_ASC:10,SORTBY_DISCOUNT_DESC:11,SORTBY_SHOP_REVIEW:12,SORTBY_ITEM_SOLD_DESC:13}},MAP_LOGISTICS_LIST=[80012,80013],MAP_LOGISTICS_DICT={80012:{id:80012,name:"Go-Send Instant"},80013:{id:80013,name:"Go-Send Sameday"}},SUPPORT_ADDRESS_CHECK_LOGISTICS_LIST=[80012,80013,80014,50002,50010,50011,50012,50014,40012,40013],SUPPORT_ADDRESS_CHECK_LOGISTICS_DICT={80012:{id:80012,name:"Go-Send Instant"},80013:{id:80013,name:"Go-Send Sameday"},80014:{id:80014,name:"J&T Express"},50002:{id:50002,name:"Shopee Ship"},50010:{id:50010,name:"Viettel Post"},50011:{id:50011,name:"Giao Hàng Nhanh"},50012:{id:50012,name:"Giao Hàng Tiết Kiệm"},50014:{id:50014,name:"Delivery Now"},40012:{id:40012,name:"LBC Integrated"},40013:{id:40013,name:"Black Arrow Integrated"}},MAP_LOGISTICS_LIST_ENABLED_DICT={};$.map(MAP_LOGISTICS_LIST,function(e){MAP_LOGISTICS_LIST_ENABLED_DICT[e]={enabled:!1}}),window.T_GA_ID&&window.T_GA_ID_PC&&navigator.userAgent.indexOf("Googlebot")<0&&(toexe="(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');var _gaq = _gaq || [];ga('create', T_GA_ID, 'auto');ga('create', T_GA_ID_PC, 'auto', 'pcTracker');ga('pcTracker.require', 'ec');ga('send', 'pageview');while(_gaq.length > 0){var e = _gaq.pop();if(!Array.isArray(e) || e.length < 2){console.log('Wrong gaq item: ' + e);continue;}if(e.length == 4){ga('send', 'event', e[0], e[1], e[2], e[3]);}else if(e.length == 3){ga('send', 'event', e[0], e[1], e[2]);}else{ga('send', 'event', e[0], e[1]);}}",setTimeout(function(){eval(toexe)},1e3));var CUSTOM_PROTOCOL_SCHEME="wvjbscheme",QUEUE_HAS_MESSAGE="__WVJB_QUEUE_MESSAGE__";!function(){function e(){v=[],I=[],S={},C={},A=1,WebViewJavascriptBridge._messageHandler=null}function t(e){m=e.createElement("iframe"),m.style.display="none",m.src=CUSTOM_PROTOCOL_SCHEME+"://"+QUEUE_HAS_MESSAGE,e.documentElement.appendChild(m)}function i(e){if(WebViewJavascriptBridge._messageHandler)return console.warn("WebViewJavascriptBridge.init called twice"),null;WebViewJavascriptBridge._messageHandler=[e];var t=I;I=null,setTimeout(function(){for(var e=0;e<t.length;e++)_(t[e])},0)}function n(e,t){s({data:e},t)}function a(e,t,i){"undefined"==typeof S[e]&&(S[e]={}),i=i||t.toString(),S[e][i]=t,f(e)}function o(e,t){if(t){var i=S[e];if(i){delete i[t];var n=!1;for(var a in i)if(i.hasOwnProperty(a)){n=!0;break}n||(delete S[e],f(e))}}}function r(e){var t=e.toString();T[t]||(T[t]=e)}function l(e){var t=e.toString();delete T[t]}function c(e,t,i){for(var n in T)if(T.hasOwnProperty(n))try{T[n](e,t)}catch(a){}if("fullScreenImage"==e&&t){var o=t.imageUrls;if(o&&o.length)try{for(var r=0;r<o.length;r++){var l=o[r];"string"!=typeof l||l.indexOf(window.ITEM_IMAGE_BASE_URL)<0||(o[r]=l.replace("/webp/","/"))}}catch(c){}}s({handlerName:e,data:t},i)}function s(e,t){if(!window.__appHasPendingCacheUpdate__){if(t){var i="cb_"+A++ +"_"+curTs();C[i]=t,e.callbackId=i}window.navigator.userAgent.toLowerCase().indexOf("android")==-1?(v.push(e),m.src=CUSTOM_PROTOCOL_SCHEME+"://"+QUEUE_HAS_MESSAGE):window.gabridge.sendMsg(JSON.stringify(e))}}function d(){var e=JSON.stringify(v);return v=[],e}function _(e){if(!window.__appHasPendingCacheUpdate__){try{var t=JSON.parse(e)}catch(i){var t={};console.warn("Bridge dispatch failed. err = "+i)}if(t.responseId){var n=C[t.responseId];if(!n)return;n(t.responseData),delete C[t.responseId]}else{var n;if(t.callbackId){var a=t.callbackId;n=function(e){s({responseId:a,responseData:e})}}var o=WebViewJavascriptBridge._messageHandler;if(t.handlerName&&(o=S[t.handlerName]),"undefined"==typeof o)return;if("search"==t.handlerName&&window.BI_ANALYTICS){var r={action:"searchCMDFromApp",data:JSON.stringify(t.data)};BI_ANALYTICS.trackingActionEventV2({info:r},BI_ANALYTICS.getV2TrackingEventBaseData(TRACKING_V2_EVENT_TYPE.ACTION))}for(var l in o)if(o.hasOwnProperty(l))try{o[l](t.data,n)}catch(c){"undefined"!=typeof console&&console.log("WebViewJavascriptBridge: WARNING: javascript handler threw.",t,c)}}}}function p(e){I?I.push(e):_(e)}function u(e){try{has=null!=S[e]}catch(t){has=!1}return has?"true":"false"}function f(e){window.gabridge&&window.gabridge.onHasHandler(e,u(e))}function h(e){return WebViewJavascriptBridge._appHandlers&&WebViewJavascriptBridge._appHandlers.indexOf(e)>=0}function g(){if(window.__appCacheStatus__==y||window.__appCacheStatus__==b)setTimeout(g,50);else if(window.__appCacheStatus__==N){window.__appCacheStatus__=P;var e=window.__appCacheUpdatedData__;if(window.__appCacheUpdatedData__=null,scrollTopFunc()>screen.height)return;window.GTimeoutAndInterval&&GTimeoutAndInterval.clearAll(),window.__appHasPendingCacheUpdate__=!0,offAllEvents();try{unhookEventTarget(Window),unhookEventTarget(Document),unhookEventTarget(Element)}catch(t){console.log("unhookEventTarget.ex",t)}if(e){var i=window.runAfterDomReady,n=window.triggerIOSAppPageReInit;_resetGlobals_(window.ORIGINAL_GLOBAL_VARS),window.runAfterDomReady=i,document.open(),window.__appHasPendingCacheUpdate__=null,document.write(decodeURIComponent(e.replace(/\\'/g,"'"))),document.close(),runAfterDomReady(function(){n(!0,!0),n(!0,!1)})}else window.requestAnimationFrame(function(){v.push({handlerName:"reloadFromCacheIfNeeded",data:{}}),m.src=CUSTOM_PROTOCOL_SCHEME+"://"+QUEUE_HAS_MESSAGE,window.__appHasPendingCacheUpdate__=null})}else window.__appCacheStatus__==P}if(window.inBeeShop=function(){return window.navigator.userAgent.toLowerCase().indexOf("beeshop")!=-1},!window.WebViewJavascriptBridge&&window.navigator.userAgent.indexOf("Beeshop")!=-1){var m,v=[],I=[],S={},C={},A=1,T={};window.WebViewJavascriptBridge={init:i,send:n,registerHandler:a,unregisterHandler:o,callHandler:c,hasHandler:u,hasHandlerCB:f,addHook:r,delHook:l,appHasHandler:h,_fetchQueue:d,_handleMessageFromObjC:p,reset:e};var w=document;t(w);var O=w.createEvent("Events");O.initEvent("WebViewJavascriptBridgeReady"),O.bridge=WebViewJavascriptBridge,w.dispatchEvent(O);var E=null,k=null;isIOS()&&isShopeeApp()&&(E=setTimeout(function(){E=null,window.__gawindow__||(k=setInterval(function(){(window.__gawindow__||triggerIOSAppPageReInit())&&(clearInterval(k),k=null)},300))},2e3));var b=0,y=1,N=2,P=3;isIOS()&&isShopeeApp()&&isVer23Plus()&&runAfterDomReady(g,50)}}();try{if(isGasApp()){var __gas_iid__=null;__gas_iid__=setInterval(function(){window.WebViewJavascriptBridge&&(delete window.WebViewJavascriptBridge,__gas_iid__&&(clearInterval(__gas_iid__),__gas_iid__=null))},10),window.WebViewJavascriptBridge&&delete window.WebViewJavascriptBridge}}catch(ex){console.log("GasApp: "+ex)}var _gatap_disable_override_=!1,_gatap_override_events_done_=!1,_ga_bridge_on_scroll_=isIOS()&&isShopeeApp(),DEEP_LINK_TRIGGER={MAX_ATTEMPT:50,BACK_OFF:1e3,CURRENT_ATTEMPT:0},SeoUtil=function(){function e(){var e=location.pathname;return e.indexOf(C)<0?null:e.substr(e.indexOf(C)).split(".")[1].split("#")[0]}function t(){var e=location.pathname;return e.indexOf(C)<0?null:e.substr(e.indexOf(C)).split(".")[2].split("#")[0]}function i(){var e=location.pathname;return e.indexOf(C)<0?null:e.substr(e.indexOf(C)).split(".").length<=3?null:e.substr(e.indexOf(C)).split(".")[3].split("#")[0]}function n(){var e=location.pathname;if(e.indexOf(A)<0)return null;var t=e.indexOf(A);return"#"+e.substr(1,t-1)}function a(){var e=location.pathname;if(e.indexOf("-i.")<0)return null;var t=e.split("."),i=t[t.length-2],n=t[t.length-1].split("/")[0];return{shopid:i,itemid:n}}function o(e){return e=decodeURIComponent(e),e.replace(/(^| )(\w)/g,function(e){return e.toUpperCase()})}function r(){var e=location.pathname;if(e.indexOf(C)<0)return null;if(t())return null;var i=e.indexOf(C);return o(e.substr(1,i-1))}function l(){var e=location.pathname;if(e.indexOf(C)<0)return null;if(!i())return null;var t=e.indexOf(C);return o(e.substr(1,t-1))}function c(){var e=location.pathname;if(!t())return null;var i=e.indexOf(C);return o(e.substr(1,i-1))}function s(e,t){BJUtil.navigate("/"+e+"-cat."+t)}function d(e,t,i){BJUtil.navigate("/"+e+"-cat."+t+"."+i)}function _(e,t,i,n){BJUtil.navigate(u(e,t,i,n))}function p(e,t,i,n){BJUtil.navigate(f(e,t,i,n))}function u(e,t,i,n){return"/"+I(e)+"-i."+t+"."+i+(n?"#snapshot=1":"")}function f(e,t,i,n){return"/"+I(e)+"-i."+t+"."+i+"/similar/"+(n?"#from_flash_sale=true":"#from_flash_sale=false")}function h(e){BJUtil.navigate(g(e))}function g(e){return"/"+e}function m(e){BJUtil.navigate(v(e))}function v(e){return"/"+e+"-tag"}function I(e){return void 0===e?"":e.replace(/\s/g,"-").replace(/#/g,"-").replace(/%/g,"-").replace(/\//g,"-").replace(/\?/g,"-")}function S(e,t){return t!=Constants.OFFICAL_SHOP_POPULAR_CATID?window.CONFIG_OFFICIAL_SHOP_ROOT_URL+"/"+e+C+t:window.CONFIG_OFFICIAL_SHOP_ROOT_URL+"/"}var C="-cat.",A="-tag";return{getCategoryId:e,getSubCategoryId:t,getSubSubCategoryId:i,getHashtag:n,getItem:a,getCategoryname:r,getSubCategoryname:c,navigateCategorySeo:s,navigateCategorySubSeo:d,navigateItemSeo:_,navigateItemSimilarSeo:p,getItemUrlSeo:u,navigateShopSeo:h,getShopUrlSeo:g,navigateHashtagSeo:m,getHashtagUrlSeo:v,getSearchKeyword:l,getOfficialShopCategoryUrlSeo:S}}();!function(){function e(){$(".web-popup-holder > .button").bind("tap",a.buttonAction),$(".web-popup-mask, .web-popup-holder").fadeIn(a.fadeSpeed)}function t(e){e.stopImmediatePropagation(),setTimeout(function(){$(".web-popup-mask").unbind("tap",t),$(".web-popup-holder > .button").unbind("tap",a.buttonAction),$(".web-popup-mask, .web-popup-holder").fadeOut(a.fadeSpeed),a.callback&&a.callback()},300)}function i(){for(var e,t=["title","text","button"],i=0;i<t.length;i++)e=t[i],void 0!==a[e]?a.html?$(".web-popup-holder > ."+e).html(a[e]):$(".web-popup-holder > ."+e).text(a[e]):$(".web-popup-holder > ."+e).css("display","none");if(void 0!==a.image){var n=$(".web-popup-holder > .image");if(void 0!==a.image["class"]){var o=n.data("img-class");o&&n.removeClass(o);var r=a.image["class"];n.addClass(r),n.data("img-class",r)}else n.css("background-image","url("+a.image.url+")");void 0!==a.image.width&&void 0!==a.image.height&&$(".web-popup-holder > .image").css("width",a.image.width).css("height",a.image.height).css("background-size",a.image.width+"px "+a.image.height+"px")}else $(".web-popup-holder > .image").css("display","none")}function n(e){$.extend(!0,a,e),a.mobile&&$(".web-popup-holder").addClass("web-popup-holder-mobile"),i()}var a={fadeSpeed:200,mobile:!1};a.buttonAction=t,window.WEB_POPUP={};var o=window.WEB_POPUP;o.init=n,o.show=e,o.hide=t}();var RNUtil=function(){function e(e){if(isShopeeWeb()||!e)return null;var t=/^(http|https):\/\/[^ "]+$/;if(!t.test(e))return null;var i=urlToLocation(e),h={page:null,pathParams:null},g=a.exec(i.pathname);if(g){var m={module:"PRODUCT_PAGE",shopid:g[1],itemid:g[2]};return h.page="product",h.pathParams=m,h}var v=n.test(i.pathname);if(v){var I=parse_hash(i.hash)||{};if((!I||!I.shopid||!I.itemid)&&i.search){for(var S=i.search.split("?")[1],C=S.split("&"),A={},T=0;T<C.length;T++){var w=C[T].split("=");A[w[0]]=w[1]}"sid"in A&&"iid"in A?(I={},I.shopid=A.sid,I.itemid=A.iid):"shopid"in A&&"itemid"in A&&(I={},I.shopid=A.shopid,I.itemid=A.itemid)}if(I&&I.snapshot)return null;var m={module:"PRODUCT_PAGE",shopid:I.shopid,itemid:I.itemid};return h.page="product",h.pathParams=m,h}var O=o.test(i.pathname);if(O){var I=parse_hash(i.hash)||{};if((!I||!I.shopid)&&i.search){for(var S=i.search.split("?")[1],C=S.split("&"),A={},T=0;T<C.length;T++){var w=C[T].split("=");A[w[0]]=w[1]}"sid"in A?(I={},I.shopid=A.sid):"shopid"in A&&(I={},I.shopid=A.shopid),I&&I.shopid&&"shopcat_id"in A&&(I.shopcat_id=A.shopcat_id)}var m={module:"SHOP_PAGE",shopid:I.shopid,shopcat_id:I.shopcat_id};return h.page="shop",h.pathParams=m,h}var E=r.exec(i.pathname);if(E){var m={module:"CATEGORY_PAGE",catid:E[1]};return h.page="category",h.pathParams=m,h}var k=l.exec(i.pathname);if(k){var m={module:"SEARCH_RESULT_PAGE",categoryid:k[1],sub_categoryid:k[2]};return h.page="search",h.pathParams=m,h}var b=c.exec(i.pathname);if(b){var m={module:"SEARCH_RESULT_PAGE",categoryid:b[2],sub_categoryid:b[3],search:b[1]};return h.page="search",h.pathParams=m,h}var E=s.exec(i.pathname);if(E){var m={module:"CATEGORY_PAGE",catid:E[1]};return h.page="category",h.pathParams=m,h}var y=d.test(i.pathname);if(y){var N=parse_url_general("#",i.hash),P=parse_url_general("?",i.search),m={module:"SEARCH_RESULT_PAGE"};return _.extend(m,N),_.extend(m,P),h.page="search",h.pathParams=m,h}var R=p.test(i.pathname);if(R){var N=parse_url_general("#",i.hash),P=parse_url_general("?",i.search),m={module:"SEARCH_RESULT_PAGE"};return _.extend(m,N),_.extend(m,P),h.page="search",h.pathParams=m,h}var B=u.exec(i.pathname);if(B){var m={module:"SEARCH_RESULT_PAGE",collection:B[1]};return h.page="collection",h.pathParams=m,h}if(i.pathname===f){var I=parse_hash(i.hash)||{},m={module:"FLASH_SALE_PAGE"};return I.from_item&&(m.from_item=I.from_item),h.page="flash_sale",h.pathParams=m,h}return h}function t(t,i){var n=e(t);return!!(n&&n.page&&BJUtil.isRNEnabled(n.page))&&(bridgeInit(function(){BJUtil.navigateReactNative(n.pathParams,i||!1)}),!0)}function i(){t(window.location.href,!0)}var n=/^\/item\/$/,a=/^\/[^\/]+-i\.(\d+)\.(\d+)$/,o=/^\/shop\/$/,r=/^\/[^\/]+-cat\.(\d+)$/,l=/^\/[^\/]+-cat\.(\d+)\.(\d+)$/,c=/^\/([^\/]+)-cat\.(\d+)\.(\d+)\.(\d+)$/,s=/^\/categories\/(\d+)\//,d=/^\/category-item\/$/,p=/^\/search-item\/$/,u=/^\/collections\/(\d+)\/$/,f=Constants.FLASH_SALE_DEFAULT_URL[window.LOCALE];return i(),{jumpToReactNativeIfExists:t}}();
//# sourceMappingURL=../source_maps/jsutil_base.js.map
