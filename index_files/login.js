function login_facebook(){callback_url="http://"+location.host+"/buyer/login/facebook/",fb_data={SG:{id:"1574354049466790"},TW:{id:"382498665271383"},MY:{id:"717399095044843"},ID:{id:"957549474255294"},PH:{id:"437897333028638"},VN:{id:"421039428061656"},IR:{id:"1657538251195346"},HK:{hk:""},MM:{mm:""},TH:{id:"721805524607838"}};var e=fb_data[LOCALE].id,t="https://www.facebook.com/dialog/oauth?client_id="+e+"&redirect_uri="+encodeURIComponent(callback_url)+"&scope="+encodeURIComponent("email,public_profile")+"&state={{csrf_token}}&response_type=code";window.location.href=t}$(function(){function e(e){bjp=new BJphone(LOCALE),number_original=e.val(),number=bjp.validate(number_original),number[0]&&(phone=bjp.pretty(number[1]),e.val(phone))}function t(e){return result=validate_login_key($("input[name='credential']").val()),result.success?(login_type=result.login_type,login_key=result.msg,result=validate_password($("input[name='password']").val()),result.success?(password=BJUtil.encryptPassword(result.msg),captcha=$("input[name='captcha']").val(),void $.post("/buyer/login/login_post/",{login_key:login_key,login_type:login_type,password_hash:password,captcha:captcha,csrfmiddlewaretoken:csrf},function(e){e.err?"error_notfound"==e.err?"phone"==login_type?confirm(msg_account_not_registered)&&(location.href="/buyer/login/signup/?phone="+login_key):"email"==login_type?confirm(msg_account_not_registered)&&(location.href="/buyer/login/email/signup/"):confirm(msg_account_not_registered)&&(location.href="/buyer/login/signup/"):"error_captcha"==e.err?(alert_message(i18n.t("msg_invalid_captcha_entered")),$(".captcha img").attr("src","/api/v0/captcha/?"+(new Date).getTime())):"error_require_captcha"==e.err?(alert_message(i18n.t("label_captcha")),$(".captcha img").attr("src","/api/v0/captcha/?"+(new Date).getTime()),$(".c-container").show()):"error_need_otp"==e.err?BJUtil.navigateModally("/buyer/login/otp/?loginType="+login_type+"&loginKey="+login_key,"otp_page"):"error_perm"==e.err?(alert_message(msg_wrong_account_password),$(".captcha img").attr("src","/api/v0/captcha/?"+(new Date).getTime())):"error_country_restrict"==e.err?(alert_message(i18n.t("msg_account_country_restricted")),$(".captcha img").attr("src","/api/v0/captcha/?"+(new Date).getTime())):(alert_message(i18n.t("msg_server_error")),$(".captcha img").attr("src","/api/v0/captcha/?"+(new Date).getTime())):goBackAndReload()}).fail(function(e){})):void alert_message(result.msg)):void alert_message(result.msg)}registerGoBackIfLoggedIn(-1),$('input[name="credential"]').on("blur",function(t){$.isNumeric($(t.currentTarget).val())&&e($(this))});var a=$("#btn_login");a.click(t),hijackEnterKey($(document.body),t),$(".facebook").click(login_facebook)});
//# sourceMappingURL=../../../source_maps/buyer/login/login.js.map
